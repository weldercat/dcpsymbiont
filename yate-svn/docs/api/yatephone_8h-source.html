<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Yate: yatephone.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.2 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>yatephone.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00022"></a>00022 <span class="preprocessor">#ifndef __YATEPHONE_H</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">#define __YATEPHONE_H</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a>00025 <span class="preprocessor">#ifndef __cplusplus</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">#error C++ is required</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;yatengine.h&gt;</span>
<a name="l00030"></a>00030 
<a name="l00034"></a>00034 <span class="keyword">namespace </span>TelEngine {
<a name="l00035"></a>00035 
<a name="l00039"></a><a class="code" href="structTelEngine_1_1ImageInfo.html">00039</a> <span class="keyword">struct </span>YATE_API ImageInfo {
<a name="l00043"></a><a class="code" href="structTelEngine_1_1ImageInfo.html#2474a5474cbff19523a51eb1de01cda4">00043</a>     <span class="keywordtype">int</span> width;
<a name="l00044"></a>00044 
<a name="l00048"></a><a class="code" href="structTelEngine_1_1ImageInfo.html#d12fc34ce789bce6c8a05d8a17138534">00048</a>     <span class="keywordtype">int</span> height;
<a name="l00049"></a>00049 
<a name="l00053"></a><a class="code" href="structTelEngine_1_1ImageInfo.html#cb5ba97551079e0b072c62c21d784ac5">00053</a>     <span class="keywordtype">int</span> depth;
<a name="l00054"></a>00054 };
<a name="l00055"></a>00055 
<a name="l00059"></a><a class="code" href="structTelEngine_1_1FormatInfo.html">00059</a> <span class="keyword">struct </span>YATE_API FormatInfo {
<a name="l00063"></a><a class="code" href="structTelEngine_1_1FormatInfo.html#8f8f80d37794cde9472343e4487ba3eb">00063</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>* name;
<a name="l00064"></a>00064 
<a name="l00068"></a><a class="code" href="structTelEngine_1_1FormatInfo.html#763fd8db6bba8fbbbc113ca0d61c47c2">00068</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>* type;
<a name="l00069"></a>00069 
<a name="l00073"></a><a class="code" href="structTelEngine_1_1FormatInfo.html#a3dad37bb3b3c95138a96b2668936923">00073</a>     <span class="keywordtype">int</span> frameSize;
<a name="l00074"></a>00074 
<a name="l00078"></a><a class="code" href="structTelEngine_1_1FormatInfo.html#636fa05e7f380226f94d3baf2fe6256e">00078</a>     <span class="keywordtype">int</span> frameTime;
<a name="l00079"></a>00079 
<a name="l00083"></a><a class="code" href="structTelEngine_1_1FormatInfo.html#d16762d495115c2606417076f062c39d">00083</a>     <span class="keywordtype">int</span> sampleRate;
<a name="l00084"></a>00084 
<a name="l00088"></a><a class="code" href="structTelEngine_1_1FormatInfo.html#833642af16b83f234a41e9038ac89aaf">00088</a>     <span class="keywordtype">int</span> numChannels;
<a name="l00089"></a>00089 
<a name="l00093"></a><a class="code" href="structTelEngine_1_1FormatInfo.html#ab55690eaa85a4ffb189439d180afe6a">00093</a>     <span class="keywordtype">bool</span> converter;
<a name="l00094"></a>00094 
<a name="l00100"></a>00100     <span class="keywordtype">int</span> guessSamples(<span class="keywordtype">int</span> len) <span class="keyword">const</span>;
<a name="l00101"></a>00101 
<a name="l00106"></a>00106     <span class="keywordtype">int</span> dataRate() <span class="keyword">const</span>;
<a name="l00107"></a>00107 
<a name="l00111"></a><a class="code" href="structTelEngine_1_1FormatInfo.html#304249568a3901900be938de0ddb4d54">00111</a>     <span class="keyword">inline</span> FormatInfo()
<a name="l00112"></a>00112         : name(0), type(<span class="stringliteral">"audio"</span>),
<a name="l00113"></a>00113           frameSize(0), frameTime(0),
<a name="l00114"></a>00114           sampleRate(8000), numChannels(1),
<a name="l00115"></a>00115           converter(false)
<a name="l00116"></a>00116         { }
<a name="l00117"></a>00117 
<a name="l00121"></a><a class="code" href="structTelEngine_1_1FormatInfo.html#24d43dde7b7acfe0014e2e545d2065c3">00121</a>     <span class="keyword">inline</span> <span class="keyword">explicit</span> FormatInfo(<span class="keyword">const</span> <span class="keywordtype">char</span>* _name, <span class="keywordtype">int</span> fsize = 0, <span class="keywordtype">int</span> ftime = 10000,
<a name="l00122"></a>00122         <span class="keyword">const</span> <span class="keywordtype">char</span>* _type = <span class="stringliteral">"audio"</span>, <span class="keywordtype">int</span> srate = 8000, <span class="keywordtype">int</span> nchan = 1, <span class="keywordtype">bool</span> convert = <span class="keyword">false</span>)
<a name="l00123"></a>00123         : name(_name), type(_type),
<a name="l00124"></a>00124           frameSize(fsize), frameTime(ftime),
<a name="l00125"></a>00125           sampleRate(srate), numChannels(nchan),
<a name="l00126"></a>00126           converter(convert)
<a name="l00127"></a>00127         { }
<a name="l00128"></a>00128 };
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 <span class="keyword">class </span>DataEndpoint;
<a name="l00131"></a>00131 <span class="keyword">class </span>CallEndpoint;
<a name="l00132"></a>00132 <span class="keyword">class </span>Driver;
<a name="l00133"></a>00133 
<a name="l00138"></a><a class="code" href="structTelEngine_1_1TranslatorCaps.html">00138</a> <span class="keyword">struct </span>YATE_API TranslatorCaps {
<a name="l00140"></a><a class="code" href="structTelEngine_1_1TranslatorCaps.html#6e7cb967642d4b48d5c2df4ea7348856">00140</a>     <span class="keyword">const</span> FormatInfo* src;
<a name="l00142"></a><a class="code" href="structTelEngine_1_1TranslatorCaps.html#0beb8daec5ddd4e5b0a9d54138938e98">00142</a>     <span class="keyword">const</span> FormatInfo* dest;
<a name="l00144"></a><a class="code" href="structTelEngine_1_1TranslatorCaps.html#66700f11d42fee2413e58dbf49c43ee1">00144</a>     <span class="keywordtype">int</span> cost;
<a name="l00145"></a>00145 };
<a name="l00146"></a>00146 
<a name="l00151"></a><a class="code" href="classTelEngine_1_1FormatRepository.html">00151</a> <span class="keyword">class </span>YATE_API FormatRepository
<a name="l00152"></a>00152 {
<a name="l00153"></a>00153     <a class="code" href="namespaceTelEngine.html#ca9689d1027503561ea6a86525ee2afa">YNOCOPY</a>(FormatRepository); <span class="comment">// no automatic copies please</span>
<a name="l00154"></a>00154 <span class="keyword">private</span>:
<a name="l00155"></a>00155     FormatRepository();
<a name="l00156"></a>00156 <span class="keyword">public</span>:
<a name="l00162"></a>00162     <span class="keyword">static</span> <span class="keyword">const</span> FormatInfo* getFormat(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; name);
<a name="l00163"></a>00163 
<a name="l00175"></a>00175     <span class="keyword">static</span> <span class="keyword">const</span> FormatInfo* addFormat(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; name, <span class="keywordtype">int</span> fsize, <span class="keywordtype">int</span> ftime, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; type = <span class="stringliteral">"audio"</span>, <span class="keywordtype">int</span> srate = 8000, <span class="keywordtype">int</span> nchan = 1);
<a name="l00176"></a>00176 };
<a name="l00177"></a>00177 
<a name="l00182"></a><a class="code" href="classTelEngine_1_1DataFormat.html">00182</a> <span class="keyword">class </span>YATE_API DataFormat : <span class="keyword">public</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>
<a name="l00183"></a>00183 {
<a name="l00184"></a>00184 <span class="keyword">public</span>:
<a name="l00188"></a><a class="code" href="classTelEngine_1_1DataFormat.html#01b6850185c5712724e728450c5c720d">00188</a>     <span class="keyword">inline</span> DataFormat()
<a name="l00189"></a>00189         : <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>((const char*)0), m_parsed(0)
<a name="l00190"></a>00190         { }
<a name="l00191"></a>00191 
<a name="l00196"></a><a class="code" href="classTelEngine_1_1DataFormat.html#e7d5fd79e576e1ff772c882c26a00cf8">00196</a>     <span class="keyword">inline</span> DataFormat(<span class="keyword">const</span> <span class="keywordtype">char</span>* value)
<a name="l00197"></a>00197         : <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>(value), m_parsed(0)
<a name="l00198"></a>00198         { }
<a name="l00199"></a>00199 
<a name="l00204"></a><a class="code" href="classTelEngine_1_1DataFormat.html#a8657bfd60179859b26127c6e0ab1672">00204</a>     <span class="keyword">inline</span> DataFormat(<span class="keyword">const</span> DataFormat&amp; value)
<a name="l00205"></a>00205         : <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>(value), m_parsed(value.getInfo())
<a name="l00206"></a>00206         { }
<a name="l00207"></a>00207 
<a name="l00212"></a><a class="code" href="classTelEngine_1_1DataFormat.html#87392e1bda9aebe43f000a11132fd229">00212</a>     <span class="keyword">inline</span> DataFormat(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; value)
<a name="l00213"></a>00213         : <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>(value), m_parsed(0)
<a name="l00214"></a>00214         { }
<a name="l00215"></a>00215 
<a name="l00220"></a><a class="code" href="classTelEngine_1_1DataFormat.html#fd1b1d4d9c8c5495a80a6c8f12e2b27d">00220</a>     <span class="keyword">inline</span> DataFormat(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; value)
<a name="l00221"></a>00221         : <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>(value), m_parsed(0)
<a name="l00222"></a>00222         { }
<a name="l00223"></a>00223 
<a name="l00228"></a><a class="code" href="classTelEngine_1_1DataFormat.html#2a1d7fdab9b546aaceacec634759bb16">00228</a>     <span class="keyword">inline</span> DataFormat(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>* value)
<a name="l00229"></a>00229         : <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>(value ? value-&gt;<a class="code" href="namespaceTelEngine.html#45cb66c4270ea4de2eb042a79b45b159">c_str</a>() : (const char*)0), m_parsed(0)
<a name="l00230"></a>00230         { }
<a name="l00231"></a>00231 
<a name="l00236"></a><a class="code" href="classTelEngine_1_1DataFormat.html#5e85d4a12d57ee499b8ca65663d7a06c">00236</a>     <span class="keyword">inline</span> <span class="keyword">explicit</span> DataFormat(<span class="keyword">const</span> FormatInfo* format)
<a name="l00237"></a>00237         : <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>(format ? format-&gt;name : (const char*)0), m_parsed(format)
<a name="l00238"></a>00238         { }
<a name="l00239"></a>00239 
<a name="l00243"></a><a class="code" href="classTelEngine_1_1DataFormat.html#54fdfeb52cc2c1dbbaa460b42c3ab357">00243</a>     <span class="keyword">inline</span> DataFormat&amp; operator=(<span class="keyword">const</span> DataFormat&amp; value)
<a name="l00244"></a>00244         { <a class="code" href="classTelEngine_1_1NamedList.html#0ba106800a3d1f22a681b9bf309a1993">NamedList::operator=</a>(value); m_parsed = value.<a class="code" href="classTelEngine_1_1DataFormat.html#a80eb68bde69130fa99d1e7fe3138337">getInfo</a>(); <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00245"></a>00245 
<a name="l00250"></a>00250     <span class="keyword">const</span> FormatInfo* getInfo() <span class="keyword">const</span>;
<a name="l00251"></a>00251 
<a name="l00257"></a><a class="code" href="classTelEngine_1_1DataFormat.html#68a76393896c182dc378260da1f4f3db">00257</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> frameSize(<span class="keywordtype">int</span> defValue = 0)<span class="keyword"> const</span>
<a name="l00258"></a>00258 <span class="keyword">        </span>{ <span class="keywordflow">return</span> getInfo() ? getInfo()-&gt;frameSize : defValue; }
<a name="l00259"></a>00259 
<a name="l00265"></a><a class="code" href="classTelEngine_1_1DataFormat.html#806659e8fe6f92fe991a197ef8993688">00265</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> frameTime(<span class="keywordtype">int</span> defValue = 0)<span class="keyword"> const</span>
<a name="l00266"></a>00266 <span class="keyword">        </span>{ <span class="keywordflow">return</span> getInfo() ? getInfo()-&gt;frameTime : defValue; }
<a name="l00267"></a>00267 
<a name="l00274"></a><a class="code" href="classTelEngine_1_1DataFormat.html#fd75b199ea844630a144fa1cf4dd76b7">00274</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> sampleRate(<span class="keywordtype">int</span> defValue = 0)<span class="keyword"> const</span>
<a name="l00275"></a>00275 <span class="keyword">        </span>{ <span class="keywordflow">return</span> getInfo() ? getInfo()-&gt;sampleRate : defValue; }
<a name="l00276"></a>00276 
<a name="l00282"></a><a class="code" href="classTelEngine_1_1DataFormat.html#e1d021013dcac53a1b5b46aa7059ffc1">00282</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> numChannels(<span class="keywordtype">int</span> defValue = 1)<span class="keyword"> const</span>
<a name="l00283"></a>00283 <span class="keyword">        </span>{ <span class="keywordflow">return</span> getInfo() ? getInfo()-&gt;numChannels : defValue; }
<a name="l00284"></a>00284 
<a name="l00285"></a>00285 <span class="keyword">protected</span>:
<a name="l00289"></a>00289     <span class="keyword">virtual</span> <span class="keywordtype">void</span> changed();
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 <span class="keyword">private</span>:
<a name="l00292"></a>00292     <span class="keyword">mutable</span> <span class="keyword">const</span> FormatInfo* m_parsed;
<a name="l00293"></a>00293 };
<a name="l00294"></a>00294 
<a name="l00298"></a><a class="code" href="classTelEngine_1_1DataNode.html">00298</a> <span class="keyword">class </span>YATE_API DataNode : <span class="keyword">public</span> <a class="code" href="classTelEngine_1_1RefObject.html">RefObject</a>
<a name="l00299"></a>00299 {
<a name="l00300"></a>00300     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classTelEngine_1_1DataEndpoint.html" title="A data transfer endpoint capable of sending and/or receiving data.">DataEndpoint</a>;
<a name="l00301"></a>00301     <a class="code" href="namespaceTelEngine.html#ca9689d1027503561ea6a86525ee2afa">YNOCOPY</a>(DataNode); <span class="comment">// no automatic copies please</span>
<a name="l00302"></a>00302 <span class="keyword">public</span>:
<a name="l00306"></a><a class="code" href="classTelEngine_1_1DataNode.html#cff079fdf8427c743f9197ea5be33a7f">00306</a>     <span class="keyword">enum</span> <a class="code" href="classTelEngine_1_1DataNode.html#cff079fdf8427c743f9197ea5be33a7f">DataFlags</a> {
<a name="l00307"></a>00307         DataStart   = 0x0001,
<a name="l00308"></a>00308         DataEnd     = 0x0002,
<a name="l00309"></a>00309         DataMark    = 0x0004,
<a name="l00310"></a>00310         DataSilent  = 0x0008,
<a name="l00311"></a>00311         DataMissed  = 0x0010,
<a name="l00312"></a>00312         DataError   = 0x0020,
<a name="l00313"></a>00313         DataPrivate = 0x0100
<a name="l00314"></a>00314     };
<a name="l00315"></a>00315 
<a name="l00320"></a><a class="code" href="classTelEngine_1_1DataNode.html#78a5932a1472a294e514327bac642cb5">00320</a>     <span class="keyword">inline</span> <span class="keyword">explicit</span> DataNode(<span class="keyword">const</span> <span class="keywordtype">char</span>* format = 0)
<a name="l00321"></a>00321         : m_format(format), m_timestamp(0)
<a name="l00322"></a>00322         { }
<a name="l00323"></a>00323 
<a name="l00329"></a><a class="code" href="classTelEngine_1_1DataNode.html#46c660610a0d2c6fc143d6b7082db59d">00329</a>     <span class="keyword">virtual</span> <span class="keywordtype">int</span> costFormat(<span class="keyword">const</span> DataFormat&amp; format)
<a name="l00330"></a>00330         { <span class="keywordflow">return</span> -1; }
<a name="l00331"></a>00331 
<a name="l00337"></a><a class="code" href="classTelEngine_1_1DataNode.html#ce30d4e68cb5ae605b39fe9b619ab177">00337</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> setFormat(<span class="keyword">const</span> DataFormat&amp; format)
<a name="l00338"></a>00338         { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00339"></a>00339 
<a name="l00344"></a><a class="code" href="classTelEngine_1_1DataNode.html#0d76e03f72715d4d24cf3bde960b8402">00344</a>     <span class="keyword">inline</span> <span class="keyword">const</span> DataFormat&amp; getFormat()<span class="keyword"> const</span>
<a name="l00345"></a>00345 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_format; }
<a name="l00346"></a>00346 
<a name="l00351"></a><a class="code" href="classTelEngine_1_1DataNode.html#375f527de2633ed22c3aac25d9a1c3b0">00351</a>     <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> timeStamp()<span class="keyword"> const</span>
<a name="l00352"></a>00352 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_timestamp; }
<a name="l00353"></a>00353 
<a name="l00358"></a><a class="code" href="classTelEngine_1_1DataNode.html#31c6fdaee3c057504dd3c9d0c9866132">00358</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> valid()<span class="keyword"> const</span>
<a name="l00359"></a>00359 <span class="keyword">        </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l00360"></a>00360 
<a name="l00366"></a><a class="code" href="classTelEngine_1_1DataNode.html#fc0eec9fbf964c2e6f5ed69ff77fdb52">00366</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> control(<a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; params)
<a name="l00367"></a>00367         { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00368"></a>00368 
<a name="l00373"></a><a class="code" href="classTelEngine_1_1DataNode.html#ce213bd0ffa4cbc3702aeb0ca6e51c76">00373</a>     <span class="keyword">inline</span> <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> invalidStamp()
<a name="l00374"></a>00374         { <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)-1; }
<a name="l00375"></a>00375 
<a name="l00376"></a>00376 <span class="keyword">protected</span>:
<a name="l00382"></a><a class="code" href="classTelEngine_1_1DataNode.html#0f47bef84d4157122231d6d5b82218b7">00382</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> attached(<span class="keywordtype">bool</span> added)
<a name="l00383"></a>00383         { }
<a name="l00384"></a>00384 
<a name="l00385"></a>00385     DataFormat m_format;
<a name="l00386"></a>00386     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> m_timestamp;
<a name="l00387"></a>00387 };
<a name="l00388"></a>00388 
<a name="l00389"></a>00389 <span class="keyword">class </span>DataSource;
<a name="l00390"></a>00390 <span class="keyword">class </span>DataTranslator;
<a name="l00391"></a>00391 <span class="keyword">class </span>TranslatorFactory;
<a name="l00392"></a>00392 <span class="keyword">class </span>ThreadedSourcePrivate;
<a name="l00393"></a>00393 
<a name="l00397"></a><a class="code" href="classTelEngine_1_1DataConsumer.html">00397</a> <span class="keyword">class </span>YATE_API DataConsumer : <span class="keyword">public</span> DataNode
<a name="l00398"></a>00398 {
<a name="l00399"></a>00399     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classTelEngine_1_1DataSource.html">DataSource</a>;
<a name="l00400"></a>00400 
<a name="l00401"></a>00401 <span class="keyword">public</span>:
<a name="l00406"></a><a class="code" href="classTelEngine_1_1DataConsumer.html#1670b25e53861c9b44639d964ef8f90d">00406</a>     <span class="keyword">inline</span> <span class="keyword">explicit</span> DataConsumer(<span class="keyword">const</span> <span class="keywordtype">char</span>* format = <span class="stringliteral">"slin"</span>)
<a name="l00407"></a>00407         : DataNode(format),
<a name="l00408"></a>00408           m_source(0), m_override(0),
<a name="l00409"></a>00409           m_regularTsDelta(0), m_overrideTsDelta(0), m_lastTsTime(0)
<a name="l00410"></a>00410         { }
<a name="l00411"></a>00411 
<a name="l00415"></a>00415     <span class="keyword">virtual</span> <span class="keywordtype">void</span> destroyed();
<a name="l00416"></a>00416 
<a name="l00422"></a>00422     <span class="keyword">virtual</span> <span class="keywordtype">void</span>* getObject(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; name) <span class="keyword">const</span>;
<a name="l00423"></a>00423 
<a name="l00433"></a>00433     <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> Consume(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1DataBlock.html" title="A class that holds just a block of raw data.">DataBlock</a>&amp; data, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> tStamp, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags) = 0;
<a name="l00434"></a>00434 
<a name="l00439"></a><a class="code" href="classTelEngine_1_1DataConsumer.html#06ab3d98d5375c4bcd15eb7610132ccb">00439</a>     <span class="keyword">inline</span> <a class="code" href="classTelEngine_1_1DataSource.html">DataSource</a>* getConnSource()<span class="keyword"> const</span>
<a name="l00440"></a>00440 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_source; }
<a name="l00441"></a>00441 
<a name="l00446"></a><a class="code" href="classTelEngine_1_1DataConsumer.html#b3c1a91425717bda1cb44b663a8f0580">00446</a>     <span class="keyword">inline</span> <a class="code" href="classTelEngine_1_1DataSource.html">DataSource</a>* getOverSource()<span class="keyword"> const</span>
<a name="l00447"></a>00447 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_override; }
<a name="l00448"></a>00448 
<a name="l00453"></a><a class="code" href="classTelEngine_1_1DataConsumer.html#528fb7f7b2a0eb24d2cc8d6bd7406f62">00453</a>     <span class="keyword">virtual</span> <a class="code" href="classTelEngine_1_1DataSource.html">DataSource</a>* getTransSource()<span class="keyword"> const</span>
<a name="l00454"></a>00454 <span class="keyword">        </span>{ <span class="keywordflow">return</span> 0; }
<a name="l00455"></a>00455 
<a name="l00456"></a>00456 <span class="keyword">protected</span>:
<a name="l00462"></a>00462     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> synchronize(<a class="code" href="classTelEngine_1_1DataSource.html">DataSource</a>* source);
<a name="l00463"></a>00463 
<a name="l00464"></a>00464 <span class="keyword">private</span>:
<a name="l00465"></a>00465     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> Consume(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1DataBlock.html" title="A class that holds just a block of raw data.">DataBlock</a>&amp; data, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> tStamp,
<a name="l00466"></a>00466         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags, <a class="code" href="classTelEngine_1_1DataSource.html">DataSource</a>* source);
<a name="l00467"></a>00467     <a class="code" href="classTelEngine_1_1DataSource.html">DataSource</a>* m_source;
<a name="l00468"></a>00468     <a class="code" href="classTelEngine_1_1DataSource.html">DataSource</a>* m_override;
<a name="l00469"></a>00469     <span class="keywordtype">long</span> m_regularTsDelta;
<a name="l00470"></a>00470     <span class="keywordtype">long</span> m_overrideTsDelta;
<a name="l00471"></a>00471     u_int64_t m_lastTsTime;
<a name="l00472"></a>00472 };
<a name="l00473"></a>00473 
<a name="l00477"></a><a class="code" href="classTelEngine_1_1DataSource.html">00477</a> <span class="keyword">class </span>YATE_API DataSource : <span class="keyword">public</span> DataNode, <span class="keyword">public</span> <a class="code" href="classTelEngine_1_1Mutex.html" title="Mutex support.">Mutex</a>
<a name="l00478"></a>00478 {
<a name="l00479"></a>00479     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classTelEngine_1_1DataTranslator.html" title="An unidirectional data translator (codec).">DataTranslator</a>;
<a name="l00480"></a>00480     <a class="code" href="namespaceTelEngine.html#ca9689d1027503561ea6a86525ee2afa">YNOCOPY</a>(DataSource); <span class="comment">// no automatic copies please</span>
<a name="l00481"></a>00481 <span class="keyword">public</span>:
<a name="l00486"></a><a class="code" href="classTelEngine_1_1DataSource.html#f2146e0685f5f9fe701dc6cf5e0c87f5">00486</a>     <span class="keyword">inline</span> <span class="keyword">explicit</span> DataSource(<span class="keyword">const</span> <span class="keywordtype">char</span>* format = <span class="stringliteral">"slin"</span>)
<a name="l00487"></a>00487         : DataNode(format), <a class="code" href="classTelEngine_1_1Mutex.html" title="Mutex support.">Mutex</a>(false,<span class="stringliteral">"DataSource"</span>),
<a name="l00488"></a>00488           m_nextStamp(invalidStamp()), m_translator(0) { }
<a name="l00489"></a>00489 
<a name="l00493"></a>00493     <span class="keyword">virtual</span> <span class="keywordtype">void</span> destroyed();
<a name="l00494"></a>00494 
<a name="l00500"></a>00500     <span class="keyword">virtual</span> <span class="keywordtype">void</span>* getObject(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; name) <span class="keyword">const</span>;
<a name="l00501"></a>00501 
<a name="l00506"></a>00506     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> valid() <span class="keyword">const</span>;
<a name="l00507"></a>00507 
<a name="l00515"></a>00515     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> Forward(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1DataBlock.html" title="A class that holds just a block of raw data.">DataBlock</a>&amp; data, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> tStamp = invalidStamp(),
<a name="l00516"></a>00516         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags = 0);
<a name="l00517"></a>00517 
<a name="l00524"></a>00524     <span class="keywordtype">bool</span> attach(DataConsumer* consumer, <span class="keywordtype">bool</span> <span class="keyword">override</span> = <span class="keyword">false</span>);
<a name="l00525"></a>00525 
<a name="l00531"></a>00531     <span class="keywordtype">bool</span> detach(DataConsumer* consumer);
<a name="l00532"></a>00532 
<a name="l00536"></a>00536     <span class="keywordtype">void</span> clear();
<a name="l00537"></a>00537 
<a name="l00542"></a><a class="code" href="classTelEngine_1_1DataSource.html#88415d9584aceb72b2d43ba7b2b3244f">00542</a>     <span class="keyword">inline</span> <a class="code" href="classTelEngine_1_1DataTranslator.html" title="An unidirectional data translator (codec).">DataTranslator</a>* getTranslator()<span class="keyword"> const</span>
<a name="l00543"></a>00543 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_translator; }
<a name="l00544"></a>00544 
<a name="l00549"></a>00549     <span class="keywordtype">void</span> synchronize(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> tStamp);
<a name="l00550"></a>00550 
<a name="l00555"></a><a class="code" href="classTelEngine_1_1DataSource.html#2d8cf56c97374a202b17cd4683cba2aa">00555</a>     <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> nextStamp()<span class="keyword"> const</span>
<a name="l00556"></a>00556 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_nextStamp; }
<a name="l00557"></a>00557 
<a name="l00558"></a>00558 <span class="keyword">protected</span>:
<a name="l00559"></a>00559     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> m_nextStamp;
<a name="l00560"></a>00560     <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a> m_consumers;
<a name="l00561"></a>00561 <span class="keyword">private</span>:
<a name="l00562"></a>00562     <span class="keyword">inline</span> <span class="keywordtype">void</span> setTranslator(<a class="code" href="classTelEngine_1_1DataTranslator.html" title="An unidirectional data translator (codec).">DataTranslator</a>* translator) {
<a name="l00563"></a>00563             <a class="code" href="classTelEngine_1_1Lock.html" title="Ephemeral mutex or semaphore locking object.">Lock</a> mylock(<span class="keyword">this</span>);
<a name="l00564"></a>00564             m_translator = translator;
<a name="l00565"></a>00565         }
<a name="l00566"></a>00566     <span class="keywordtype">bool</span> detachInternal(DataConsumer* consumer);
<a name="l00567"></a>00567     DataTranslator* m_translator;
<a name="l00568"></a>00568 };
<a name="l00569"></a>00569 
<a name="l00574"></a><a class="code" href="classTelEngine_1_1ThreadedSource.html">00574</a> <span class="keyword">class </span>YATE_API ThreadedSource : <span class="keyword">public</span> DataSource
<a name="l00575"></a>00575 {
<a name="l00576"></a>00576     <span class="keyword">friend</span> <span class="keyword">class </span>ThreadedSourcePrivate;
<a name="l00577"></a>00577 <span class="keyword">public</span>:
<a name="l00581"></a>00581     <span class="keyword">virtual</span> <span class="keywordtype">void</span> destroyed();
<a name="l00582"></a>00582 
<a name="l00589"></a>00589     <span class="keywordtype">bool</span> start(<span class="keyword">const</span> <span class="keywordtype">char</span>* name = <span class="stringliteral">"ThreadedSource"</span>, <a class="code" href="classTelEngine_1_1Thread.html#315655b1bb5848c063491adffde62b15">Thread::Priority</a> prio = Thread::Normal);
<a name="l00590"></a>00590 
<a name="l00594"></a>00594     <span class="keywordtype">void</span> stop();
<a name="l00595"></a>00595 
<a name="l00600"></a>00600     <a class="code" href="classTelEngine_1_1Thread.html" title="Thread support class.">Thread</a>* thread() <span class="keyword">const</span>;
<a name="l00601"></a>00601 
<a name="l00606"></a>00606     <span class="keywordtype">bool</span> running() <span class="keyword">const</span>;
<a name="l00607"></a>00607 
<a name="l00608"></a>00608 <span class="keyword">protected</span>:
<a name="l00613"></a><a class="code" href="classTelEngine_1_1ThreadedSource.html#ff3189716cd1cf9016c30028aa5dc3b9">00613</a>     <span class="keyword">inline</span> <span class="keyword">explicit</span> ThreadedSource(<span class="keyword">const</span> <span class="keywordtype">char</span>* format = <span class="stringliteral">"slin"</span>)
<a name="l00614"></a>00614         : DataSource(format), m_thread(0)
<a name="l00615"></a>00615         { }
<a name="l00616"></a>00616 
<a name="l00620"></a>00620     <span class="keyword">virtual</span> <span class="keywordtype">void</span> run() = 0;
<a name="l00621"></a>00621 
<a name="l00626"></a>00626     <span class="keyword">virtual</span> <span class="keywordtype">void</span> cleanup();
<a name="l00627"></a>00627 
<a name="l00633"></a>00633     <span class="keywordtype">bool</span> looping(<span class="keywordtype">bool</span> runConsumers = <span class="keyword">false</span>) <span class="keyword">const</span>;
<a name="l00634"></a>00634 
<a name="l00635"></a>00635 <span class="keyword">private</span>:
<a name="l00636"></a>00636     ThreadedSourcePrivate* m_thread;
<a name="l00637"></a>00637 };
<a name="l00638"></a>00638 
<a name="l00644"></a><a class="code" href="classTelEngine_1_1DataTranslator.html">00644</a> <span class="keyword">class </span>YATE_API DataTranslator : <span class="keyword">public</span> DataConsumer
<a name="l00645"></a>00645 {
<a name="l00646"></a>00646     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classTelEngine_1_1TranslatorFactory.html" title="An unidirectional data translator (codec).">TranslatorFactory</a>;
<a name="l00647"></a>00647 <span class="keyword">public</span>:
<a name="l00653"></a>00653     DataTranslator(<span class="keyword">const</span> <span class="keywordtype">char</span>* sFormat, <span class="keyword">const</span> <span class="keywordtype">char</span>* dFormat);
<a name="l00654"></a>00654 
<a name="l00661"></a>00661     <span class="keyword">explicit</span> DataTranslator(<span class="keyword">const</span> <span class="keywordtype">char</span>* sFormat, DataSource* source = 0);
<a name="l00662"></a>00662 
<a name="l00666"></a>00666     ~DataTranslator();
<a name="l00667"></a>00667 
<a name="l00673"></a>00673     <span class="keyword">virtual</span> <span class="keywordtype">void</span>* getObject(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; name) <span class="keyword">const</span>;
<a name="l00674"></a>00674 
<a name="l00679"></a><a class="code" href="classTelEngine_1_1DataTranslator.html#31c6fdaee3c057504dd3c9d0c9866132">00679</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> valid()<span class="keyword"> const</span>
<a name="l00680"></a>00680 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_tsource &amp;&amp; m_tsource-&gt;valid(); }
<a name="l00681"></a>00681 
<a name="l00686"></a><a class="code" href="classTelEngine_1_1DataTranslator.html#528fb7f7b2a0eb24d2cc8d6bd7406f62">00686</a>     <span class="keyword">virtual</span> DataSource* getTransSource()<span class="keyword"> const</span>
<a name="l00687"></a>00687 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_tsource; }
<a name="l00688"></a>00688 
<a name="l00693"></a>00693     DataTranslator* getFirstTranslator();
<a name="l00694"></a>00694 
<a name="l00699"></a>00699     <span class="keyword">const</span> DataTranslator* getFirstTranslator() <span class="keyword">const</span>;
<a name="l00700"></a>00700 
<a name="l00709"></a>00709     <span class="keyword">static</span> <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a>* srcFormats(<span class="keyword">const</span> DataFormat&amp; dFormat = <span class="stringliteral">"slin"</span>, <span class="keywordtype">int</span> maxCost = -1, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxLen = 0, <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a>* lst = 0);
<a name="l00710"></a>00710 
<a name="l00719"></a>00719     <span class="keyword">static</span> <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a>* destFormats(<span class="keyword">const</span> DataFormat&amp; sFormat = <span class="stringliteral">"slin"</span>, <span class="keywordtype">int</span> maxCost = -1, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxLen = 0, <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a>* lst = 0);
<a name="l00720"></a>00720 
<a name="l00729"></a>00729     <span class="keyword">static</span> <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a>* allFormats(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a>* formats, <span class="keywordtype">bool</span> existing = <span class="keyword">true</span>, <span class="keywordtype">bool</span> sameRate = <span class="keyword">true</span>, <span class="keywordtype">bool</span> sameChans = <span class="keyword">true</span>);
<a name="l00730"></a>00730 
<a name="l00739"></a>00739     <span class="keyword">static</span> <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a>* allFormats(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; formats, <span class="keywordtype">bool</span> existing = <span class="keyword">true</span>, <span class="keywordtype">bool</span> sameRate = <span class="keyword">true</span>, <span class="keywordtype">bool</span> sameChans = <span class="keyword">true</span>);
<a name="l00740"></a>00740 
<a name="l00747"></a>00747     <span class="keyword">static</span> <span class="keywordtype">bool</span> canConvert(<span class="keyword">const</span> DataFormat&amp; fmt1, <span class="keyword">const</span> DataFormat&amp; fmt2 = <span class="stringliteral">"slin"</span>);
<a name="l00748"></a>00748 
<a name="l00755"></a>00755     <span class="keyword">static</span> <span class="keywordtype">int</span> cost(<span class="keyword">const</span> DataFormat&amp; sFormat, <span class="keyword">const</span> DataFormat&amp; dFormat);
<a name="l00756"></a>00756 
<a name="l00763"></a>00763     <span class="keyword">static</span> DataTranslator* create(<span class="keyword">const</span> DataFormat&amp; sFormat, <span class="keyword">const</span> DataFormat&amp; dFormat);
<a name="l00764"></a>00764 
<a name="l00772"></a>00772     <span class="keyword">static</span> <span class="keywordtype">bool</span> attachChain(DataSource* source, DataConsumer* consumer, <span class="keywordtype">bool</span> <span class="keyword">override</span> = <span class="keyword">false</span>);
<a name="l00773"></a>00773 
<a name="l00780"></a>00780     <span class="keyword">static</span> <span class="keywordtype">bool</span> detachChain(DataSource* source, DataConsumer* consumer);
<a name="l00781"></a>00781 
<a name="l00786"></a>00786     <span class="keyword">static</span> <span class="keywordtype">void</span> setMaxChain(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxChain);
<a name="l00787"></a>00787 
<a name="l00788"></a>00788 <span class="keyword">protected</span>:
<a name="l00794"></a>00794     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> synchronize(DataSource* source);
<a name="l00795"></a>00795 
<a name="l00800"></a>00800     <span class="keyword">static</span> <span class="keywordtype">void</span> install(<a class="code" href="classTelEngine_1_1TranslatorFactory.html" title="An unidirectional data translator (codec).">TranslatorFactory</a>* factory);
<a name="l00801"></a>00801 
<a name="l00806"></a>00806     <span class="keyword">static</span> <span class="keywordtype">void</span> uninstall(<a class="code" href="classTelEngine_1_1TranslatorFactory.html" title="An unidirectional data translator (codec).">TranslatorFactory</a>* factory);
<a name="l00807"></a>00807 
<a name="l00808"></a>00808 <span class="keyword">private</span>:
<a name="l00809"></a>00809     DataTranslator(); <span class="comment">// No default constructor please</span>
<a name="l00810"></a>00810     <span class="keyword">static</span> <span class="keywordtype">void</span> compose();
<a name="l00811"></a>00811     <span class="keyword">static</span> <span class="keywordtype">void</span> compose(<a class="code" href="classTelEngine_1_1TranslatorFactory.html" title="An unidirectional data translator (codec).">TranslatorFactory</a>* factory);
<a name="l00812"></a>00812     <span class="keyword">static</span> <span class="keywordtype">bool</span> canConvert(<span class="keyword">const</span> FormatInfo* fmt1, <span class="keyword">const</span> FormatInfo* fmt2);
<a name="l00813"></a>00813     DataSource* m_tsource;
<a name="l00814"></a>00814     <span class="keyword">static</span> <a class="code" href="classTelEngine_1_1Mutex.html" title="Mutex support.">Mutex</a> s_mutex;
<a name="l00815"></a>00815     <span class="keyword">static</span> <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a> s_factories;
<a name="l00816"></a>00816     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> s_maxChain;
<a name="l00817"></a>00817 };
<a name="l00818"></a>00818 
<a name="l00824"></a><a class="code" href="classTelEngine_1_1TranslatorFactory.html">00824</a> <span class="keyword">class </span>YATE_API TranslatorFactory : <span class="keyword">public</span> <a class="code" href="classTelEngine_1_1GenObject.html">GenObject</a>
<a name="l00825"></a>00825 {
<a name="l00826"></a>00826     <a class="code" href="namespaceTelEngine.html#ca9689d1027503561ea6a86525ee2afa">YNOCOPY</a>(TranslatorFactory); <span class="comment">// no automatic copies please</span>
<a name="l00827"></a>00827 <span class="keyword">protected</span>:
<a name="l00832"></a><a class="code" href="classTelEngine_1_1TranslatorFactory.html#3c7fa63e30441cc726b5909a2cae793b">00832</a>     <span class="keyword">inline</span> <span class="keyword">explicit</span> TranslatorFactory(<span class="keyword">const</span> <span class="keywordtype">char</span>* name = 0)
<a name="l00833"></a>00833         : m_name(name ? name : <span class="stringliteral">"?"</span>)
<a name="l00834"></a>00834         { m_counter = <a class="code" href="classTelEngine_1_1Thread.html#8fcc45df369b6421217f382f227b2725">Thread::getCurrentObjCounter</a>(<span class="keyword">true</span>); <a class="code" href="classTelEngine_1_1DataTranslator.html#78248a78eff2570181e1d5cb81bf23fe">DataTranslator::install</a>(<span class="keyword">this</span>); }
<a name="l00835"></a>00835 
<a name="l00836"></a>00836 <span class="keyword">public</span>:
<a name="l00840"></a>00840     <span class="keyword">virtual</span> ~TranslatorFactory();
<a name="l00841"></a>00841 
<a name="l00846"></a>00846     <span class="keyword">virtual</span> <span class="keywordtype">void</span> removed(<span class="keyword">const</span> TranslatorFactory* factory);
<a name="l00847"></a>00847 
<a name="l00854"></a>00854     <span class="keyword">virtual</span> DataTranslator* create(<span class="keyword">const</span> DataFormat&amp; sFormat, <span class="keyword">const</span> DataFormat&amp; dFormat) = 0;
<a name="l00855"></a>00855 
<a name="l00860"></a>00860     <span class="keyword">virtual</span> <span class="keyword">const</span> TranslatorCaps* getCapabilities() <span class="keyword">const</span> = 0;
<a name="l00861"></a>00861 
<a name="l00868"></a>00868     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> converts(<span class="keyword">const</span> DataFormat&amp; sFormat, <span class="keyword">const</span> DataFormat&amp; dFormat) <span class="keyword">const</span>;
<a name="l00869"></a>00869 
<a name="l00874"></a>00874     <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> length() <span class="keyword">const</span>;
<a name="l00875"></a>00875 
<a name="l00881"></a>00881     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> intermediate(<span class="keyword">const</span> FormatInfo* info) <span class="keyword">const</span>;
<a name="l00882"></a>00882 
<a name="l00887"></a>00887     <span class="keyword">virtual</span> <span class="keyword">const</span> FormatInfo* intermediate() <span class="keyword">const</span>;
<a name="l00888"></a>00888 
<a name="l00893"></a><a class="code" href="classTelEngine_1_1TranslatorFactory.html#1c7587266a0e2a32ac5c3a54786d7c6b">00893</a>     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* name()<span class="keyword"> const</span>
<a name="l00894"></a>00894 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_name; }
<a name="l00895"></a>00895 
<a name="l00900"></a><a class="code" href="classTelEngine_1_1TranslatorFactory.html#54c8e7113a4bb16feb8d01602c0b4424">00900</a>     <span class="keyword">inline</span> <a class="code" href="classTelEngine_1_1NamedCounter.html" title="Atomic counter with name.">NamedCounter</a>* objectsCounter()<span class="keyword"> const</span>
<a name="l00901"></a>00901 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_counter; }
<a name="l00902"></a>00902 
<a name="l00903"></a>00903 <span class="keyword">private</span>:
<a name="l00904"></a>00904     <span class="keyword">const</span> <span class="keywordtype">char</span>* m_name;
<a name="l00905"></a>00905     <a class="code" href="classTelEngine_1_1NamedCounter.html" title="Atomic counter with name.">NamedCounter</a>* m_counter;
<a name="l00906"></a>00906 };
<a name="l00907"></a>00907 
<a name="l00913"></a><a class="code" href="classTelEngine_1_1DataEndpoint.html">00913</a> <span class="keyword">class </span>YATE_API DataEndpoint : <span class="keyword">public</span> <a class="code" href="classTelEngine_1_1RefObject.html">RefObject</a>
<a name="l00914"></a>00914 {
<a name="l00915"></a>00915     <a class="code" href="namespaceTelEngine.html#ca9689d1027503561ea6a86525ee2afa">YNOCOPY</a>(DataEndpoint); <span class="comment">// no automatic copies please</span>
<a name="l00916"></a>00916 <span class="keyword">public</span>:
<a name="l00920"></a>00920     <span class="keyword">explicit</span> DataEndpoint(<a class="code" href="classTelEngine_1_1CallEndpoint.html" title="An abstract call endpoint.">CallEndpoint</a>* call = 0, <span class="keyword">const</span> <span class="keywordtype">char</span>* name = <span class="stringliteral">"audio"</span>);
<a name="l00921"></a>00921 
<a name="l00925"></a>00925     <span class="keyword">virtual</span> <span class="keywordtype">void</span> destroyed();
<a name="l00926"></a>00926 
<a name="l00932"></a>00932     <span class="keyword">virtual</span> <span class="keywordtype">void</span>* getObject(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; name) <span class="keyword">const</span>;
<a name="l00933"></a>00933 
<a name="l00938"></a>00938     <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; toString() <span class="keyword">const</span>;
<a name="l00939"></a>00939 
<a name="l00944"></a>00944     <a class="code" href="classTelEngine_1_1Mutex.html" title="Mutex support.">Mutex</a>* mutex() <span class="keyword">const</span>;
<a name="l00945"></a>00945 
<a name="l00950"></a>00950     <span class="keyword">static</span> <a class="code" href="classTelEngine_1_1Mutex.html" title="Mutex support.">Mutex</a>&amp; commonMutex();
<a name="l00951"></a>00951 
<a name="l00957"></a>00957     <span class="keywordtype">bool</span> connect(DataEndpoint* peer);
<a name="l00958"></a>00958 
<a name="l00963"></a>00963     <span class="keywordtype">bool</span> disconnect();
<a name="l00964"></a>00964 
<a name="l00969"></a>00969     <span class="keywordtype">void</span> setSource(DataSource* source = 0);
<a name="l00970"></a>00970 
<a name="l00975"></a><a class="code" href="classTelEngine_1_1DataEndpoint.html#542e927e5c9e7887b33ff51aa8bd356f">00975</a>     <span class="keyword">inline</span> DataSource* getSource()<span class="keyword"> const</span>
<a name="l00976"></a>00976 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_source; }
<a name="l00977"></a>00977 
<a name="l00982"></a>00982     <span class="keywordtype">void</span> setConsumer(DataConsumer* consumer = 0);
<a name="l00983"></a>00983 
<a name="l00988"></a><a class="code" href="classTelEngine_1_1DataEndpoint.html#e361ba041efc68c035e2667c3d874714">00988</a>     <span class="keyword">inline</span> DataConsumer* getConsumer()<span class="keyword"> const</span>
<a name="l00989"></a>00989 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_consumer; }
<a name="l00990"></a>00990 
<a name="l00996"></a>00996     <span class="keywordtype">void</span> setPeerRecord(DataConsumer* consumer = 0);
<a name="l00997"></a>00997 
<a name="l01002"></a><a class="code" href="classTelEngine_1_1DataEndpoint.html#4878a42cc59b9857b779e4fd0d8df46e">01002</a>     <span class="keyword">inline</span> DataConsumer* getPeerRecord()<span class="keyword"> const</span>
<a name="l01003"></a>01003 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_peerRecord; }
<a name="l01004"></a>01004 
<a name="l01010"></a>01010     <span class="keywordtype">void</span> setCallRecord(DataConsumer* consumer = 0);
<a name="l01011"></a>01011 
<a name="l01016"></a><a class="code" href="classTelEngine_1_1DataEndpoint.html#c372e80b7a5a5ac0e63c54054d5d3ef2">01016</a>     <span class="keyword">inline</span> DataConsumer* getCallRecord()<span class="keyword"> const</span>
<a name="l01017"></a>01017 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_callRecord; }
<a name="l01018"></a>01018 
<a name="l01024"></a>01024     <span class="keywordtype">bool</span> clearData(DataNode* node);
<a name="l01025"></a>01025 
<a name="l01031"></a>01031     <span class="keywordtype">bool</span> addSniffer(DataConsumer* sniffer);
<a name="l01032"></a>01032 
<a name="l01038"></a>01038     <span class="keywordtype">bool</span> delSniffer(DataConsumer* sniffer);
<a name="l01039"></a>01039 
<a name="l01045"></a><a class="code" href="classTelEngine_1_1DataEndpoint.html#b4856d98ec1cee083b727e868f0c4d06">01045</a>     <span class="keyword">inline</span> DataConsumer* getSniffer(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; name)
<a name="l01046"></a>01046         { <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>DataConsumer*<span class="keyword">&gt;</span>(m_sniffers[name]); }
<a name="l01047"></a>01047 
<a name="l01051"></a>01051     <span class="keywordtype">void</span> clearSniffers();
<a name="l01052"></a>01052 
<a name="l01057"></a><a class="code" href="classTelEngine_1_1DataEndpoint.html#f448cfd08b3cb03d1cbb4c5cf2fcae8e">01057</a>     <span class="keyword">inline</span> DataEndpoint* getPeer()<span class="keyword"> const</span>
<a name="l01058"></a>01058 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_peer; }
<a name="l01059"></a>01059 
<a name="l01064"></a><a class="code" href="classTelEngine_1_1DataEndpoint.html#99d9c1265315306d56c201e0e115deb2">01064</a>     <span class="keyword">inline</span> <a class="code" href="classTelEngine_1_1CallEndpoint.html" title="An abstract call endpoint.">CallEndpoint</a>* getCall()<span class="keyword"> const</span>
<a name="l01065"></a>01065 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_call; }
<a name="l01066"></a>01066 
<a name="l01071"></a><a class="code" href="classTelEngine_1_1DataEndpoint.html#c7fa2815980eb7a696b3ce00436c44ba">01071</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; name()<span class="keyword"> const</span>
<a name="l01072"></a>01072 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_name; }
<a name="l01073"></a>01073 
<a name="l01079"></a><a class="code" href="classTelEngine_1_1DataEndpoint.html#34859387b623ec14968d9603d88f404f">01079</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> clearCall(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1CallEndpoint.html" title="An abstract call endpoint.">CallEndpoint</a>* call)
<a name="l01080"></a>01080         { <span class="keywordflow">if</span> (call == m_call) m_call = 0; }
<a name="l01081"></a>01081 
<a name="l01087"></a>01087     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> control(<a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; params);
<a name="l01088"></a>01088 
<a name="l01089"></a>01089 <span class="keyword">protected</span>:
<a name="l01095"></a><a class="code" href="classTelEngine_1_1DataEndpoint.html#4eb6fb0e79eca2b38264802ce0e59073">01095</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> nativeConnect(DataEndpoint* peer)
<a name="l01096"></a>01096         { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l01097"></a>01097 
<a name="l01098"></a>01098 <span class="keyword">private</span>:
<a name="l01099"></a>01099     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> m_name;
<a name="l01100"></a>01100     DataSource* m_source;
<a name="l01101"></a>01101     DataConsumer* m_consumer;
<a name="l01102"></a>01102     DataEndpoint* m_peer;
<a name="l01103"></a>01103     <a class="code" href="classTelEngine_1_1CallEndpoint.html" title="An abstract call endpoint.">CallEndpoint</a>* m_call;
<a name="l01104"></a>01104     DataConsumer* m_peerRecord;
<a name="l01105"></a>01105     DataConsumer* m_callRecord;
<a name="l01106"></a>01106     <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a> m_sniffers;
<a name="l01107"></a>01107 };
<a name="l01108"></a>01108 
<a name="l01113"></a><a class="code" href="classTelEngine_1_1CallEndpoint.html">01113</a> <span class="keyword">class </span>YATE_API CallEndpoint : <span class="keyword">public</span> <a class="code" href="classTelEngine_1_1RefObject.html">RefObject</a>
<a name="l01114"></a>01114 {
<a name="l01115"></a>01115     <span class="keyword">friend</span> <span class="keyword">class </span>DataEndpoint;
<a name="l01116"></a>01116     <a class="code" href="namespaceTelEngine.html#ca9689d1027503561ea6a86525ee2afa">YNOCOPY</a>(CallEndpoint); <span class="comment">// no automatic copies please</span>
<a name="l01117"></a>01117 <span class="keyword">private</span>:
<a name="l01118"></a>01118     CallEndpoint* m_peer;
<a name="l01119"></a>01119     <span class="keyword">const</span> <span class="keywordtype">void</span>* m_lastPeer;
<a name="l01120"></a>01120     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> m_id;
<a name="l01121"></a>01121     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> m_lastPeerId;
<a name="l01122"></a>01122 
<a name="l01123"></a>01123 <span class="keyword">protected</span>:
<a name="l01124"></a>01124     <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a> m_data;
<a name="l01125"></a>01125     <a class="code" href="classTelEngine_1_1Mutex.html" title="Mutex support.">Mutex</a>* m_mutex;
<a name="l01126"></a>01126 
<a name="l01127"></a>01127 <span class="keyword">public</span>:
<a name="l01131"></a>01131     <span class="keyword">virtual</span> <span class="keywordtype">void</span> destroyed();
<a name="l01132"></a>01132 
<a name="l01138"></a>01138     <span class="keyword">virtual</span> <span class="keywordtype">void</span>* getObject(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; name) <span class="keyword">const</span>;
<a name="l01139"></a>01139 
<a name="l01144"></a><a class="code" href="classTelEngine_1_1CallEndpoint.html#c099daf6baa0da9d069e0a9cf2ffbb8d">01144</a>     <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; toString()<span class="keyword"> const</span>
<a name="l01145"></a>01145 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_id; }
<a name="l01146"></a>01146 
<a name="l01151"></a><a class="code" href="classTelEngine_1_1CallEndpoint.html#1d1c1158d32fbcfdb93e70964c681b68">01151</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; id()<span class="keyword"> const</span>
<a name="l01152"></a>01152 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_id; }
<a name="l01153"></a>01153 
<a name="l01158"></a><a class="code" href="classTelEngine_1_1CallEndpoint.html#92273c624e1196432b0477dd9502ec7f">01158</a>     <span class="keyword">inline</span> CallEndpoint* getPeer()<span class="keyword"> const</span>
<a name="l01159"></a>01159 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_peer; }
<a name="l01160"></a>01160 
<a name="l01166"></a>01166     <span class="keywordtype">bool</span> getPeerId(<a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; <span class="keywordtype">id</span>) <span class="keyword">const</span>;
<a name="l01167"></a>01167 
<a name="l01172"></a>01172     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> getPeerId() <span class="keyword">const</span>;
<a name="l01173"></a>01173 
<a name="l01179"></a>01179     <span class="keywordtype">bool</span> getLastPeerId(<a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; <span class="keywordtype">id</span>) <span class="keyword">const</span>;
<a name="l01180"></a>01180 
<a name="l01184"></a>01184     <span class="keywordtype">void</span> setLastPeerId();
<a name="l01185"></a>01185 
<a name="l01190"></a><a class="code" href="classTelEngine_1_1CallEndpoint.html#efd88de62aae40741ddd72a9a4cc34af">01190</a>     <span class="keyword">inline</span> <a class="code" href="classTelEngine_1_1Mutex.html" title="Mutex support.">Mutex</a>* mutex()<span class="keyword"> const</span>
<a name="l01191"></a>01191 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_mutex; }
<a name="l01192"></a>01192 
<a name="l01197"></a>01197     <span class="keyword">static</span> <a class="code" href="classTelEngine_1_1Mutex.html" title="Mutex support.">Mutex</a>&amp; commonMutex();
<a name="l01198"></a>01198 
<a name="l01206"></a>01206     <span class="keywordtype">bool</span> connect(CallEndpoint* peer, <span class="keyword">const</span> <span class="keywordtype">char</span>* reason = 0, <span class="keywordtype">bool</span> notify = <span class="keyword">true</span>);
<a name="l01207"></a>01207 
<a name="l01215"></a><a class="code" href="classTelEngine_1_1CallEndpoint.html#d475a40d8d514ffb7a04b54feff56740">01215</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> disconnect(<span class="keyword">const</span> <span class="keywordtype">char</span>* reason = 0, <span class="keywordtype">bool</span> notify = <span class="keyword">true</span>, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>* params = 0)
<a name="l01216"></a>01216         { <span class="keywordflow">return</span> disconnect(<span class="keyword">false</span>,reason,notify,params); }
<a name="l01217"></a>01217 
<a name="l01224"></a><a class="code" href="classTelEngine_1_1CallEndpoint.html#97940d5ebaefb8a169b953e764cf52df">01224</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> disconnect(<span class="keyword">const</span> <span class="keywordtype">char</span>* reason, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; params)
<a name="l01225"></a>01225         { <span class="keywordflow">return</span> disconnect(<span class="keyword">false</span>,reason,<span class="keyword">true</span>,&amp;params); }
<a name="l01226"></a>01226 
<a name="l01232"></a>01232     DataEndpoint* getEndpoint(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; type = <a class="code" href="classTelEngine_1_1CallEndpoint.html#6808a9aa6d43d05ecd128b1c45a438b4">CallEndpoint::audioType</a>()) <span class="keyword">const</span>;
<a name="l01233"></a>01233 
<a name="l01239"></a>01239     DataEndpoint* setEndpoint(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; type = <a class="code" href="classTelEngine_1_1CallEndpoint.html#6808a9aa6d43d05ecd128b1c45a438b4">CallEndpoint::audioType</a>());
<a name="l01240"></a>01240 
<a name="l01245"></a>01245     <span class="keywordtype">void</span> clearEndpoint(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; type = <a class="code" href="classTelEngine_1_1String.html#45d69b02f1e1f30d7b0b5320725950be">String::empty</a>());
<a name="l01246"></a>01246 
<a name="l01252"></a>01252     <span class="keywordtype">void</span> setSource(DataSource* source = 0, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; type = <a class="code" href="classTelEngine_1_1CallEndpoint.html#6808a9aa6d43d05ecd128b1c45a438b4">CallEndpoint::audioType</a>());
<a name="l01253"></a>01253 
<a name="l01259"></a>01259     DataSource* getSource(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; type = <a class="code" href="classTelEngine_1_1CallEndpoint.html#6808a9aa6d43d05ecd128b1c45a438b4">CallEndpoint::audioType</a>()) <span class="keyword">const</span>;
<a name="l01260"></a>01260 
<a name="l01266"></a>01266     <span class="keywordtype">void</span> setConsumer(DataConsumer* consumer = 0, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; type = <a class="code" href="classTelEngine_1_1CallEndpoint.html#6808a9aa6d43d05ecd128b1c45a438b4">CallEndpoint::audioType</a>());
<a name="l01267"></a>01267 
<a name="l01273"></a>01273     DataConsumer* getConsumer(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; type = <a class="code" href="classTelEngine_1_1CallEndpoint.html#6808a9aa6d43d05ecd128b1c45a438b4">CallEndpoint::audioType</a>()) <span class="keyword">const</span>;
<a name="l01274"></a>01274 
<a name="l01281"></a>01281     <span class="keywordtype">bool</span> clearData(DataNode* node, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; type = <a class="code" href="classTelEngine_1_1CallEndpoint.html#6808a9aa6d43d05ecd128b1c45a438b4">CallEndpoint::audioType</a>());
<a name="l01282"></a>01282 
<a name="l01287"></a>01287     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; audioType();
<a name="l01288"></a>01288 
<a name="l01289"></a>01289 <span class="keyword">protected</span>:
<a name="l01293"></a>01293     CallEndpoint(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keywordtype">id</span> = 0);
<a name="l01294"></a>01294 
<a name="l01299"></a><a class="code" href="classTelEngine_1_1CallEndpoint.html#4dcae0def3a8269363f598b64f2b856e">01299</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> connected(<span class="keyword">const</span> <span class="keywordtype">char</span>* reason) { }
<a name="l01300"></a>01300 
<a name="l01306"></a><a class="code" href="classTelEngine_1_1CallEndpoint.html#f8eecda3d9df4ea9382b7faf58cb14c1">01306</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> disconnected(<span class="keywordtype">bool</span> <span class="keyword">final</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* reason) { }
<a name="l01307"></a>01307 
<a name="l01312"></a><a class="code" href="classTelEngine_1_1CallEndpoint.html#c0f6c7b20995d4ee0a39dfc57b4b788e">01312</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setDisconnect(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>* params) { }
<a name="l01313"></a>01313 
<a name="l01321"></a>01321     <span class="keywordtype">void</span> setPeer(CallEndpoint* peer, <span class="keyword">const</span> <span class="keywordtype">char</span>* reason = 0, <span class="keywordtype">bool</span> notify = <span class="keyword">true</span>, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>* params = 0);
<a name="l01322"></a>01322 
<a name="l01327"></a>01327     <span class="keywordtype">void</span> setEndpoint(DataEndpoint* endPoint);
<a name="l01328"></a>01328 
<a name="l01333"></a>01333     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setId(<span class="keyword">const</span> <span class="keywordtype">char</span>* newId);
<a name="l01334"></a>01334 
<a name="l01335"></a>01335 <span class="keyword">private</span>:
<a name="l01336"></a>01336     <span class="keywordtype">bool</span> disconnect(<span class="keywordtype">bool</span> <span class="keyword">final</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* reason, <span class="keywordtype">bool</span> notify, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>* params);
<a name="l01337"></a>01337 };
<a name="l01338"></a>01338 
<a name="l01343"></a><a class="code" href="classTelEngine_1_1Module.html">01343</a> <span class="keyword">class </span>YATE_API Module : <span class="keyword">public</span> <a class="code" href="classTelEngine_1_1Plugin.html" title="Plugin support.">Plugin</a>, <span class="keyword">public</span> <a class="code" href="classTelEngine_1_1Mutex.html" title="Mutex support.">Mutex</a>, <span class="keyword">public</span> <a class="code" href="classTelEngine_1_1MessageReceiver.html" title="A multiple message receiver.">MessageReceiver</a>
<a name="l01344"></a>01344 {
<a name="l01345"></a>01345     <a class="code" href="namespaceTelEngine.html#ca9689d1027503561ea6a86525ee2afa">YNOCOPY</a>(Module); <span class="comment">// no automatic copies please</span>
<a name="l01346"></a>01346 <span class="keyword">private</span>:
<a name="l01347"></a>01347     <span class="keywordtype">bool</span> m_init;
<a name="l01348"></a>01348     <span class="keywordtype">int</span> m_relays;
<a name="l01349"></a>01349     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> m_type;
<a name="l01350"></a>01350     <a class="code" href="classTelEngine_1_1Regexp.html" title="A regexp matching class.">Regexp</a> m_filter;
<a name="l01351"></a>01351     u_int64_t m_changed;
<a name="l01352"></a>01352     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> s_delay;
<a name="l01353"></a>01353 
<a name="l01354"></a>01354 <span class="keyword">public</span>:
<a name="l01360"></a>01360     <span class="keyword">virtual</span> <span class="keywordtype">void</span>* getObject(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; name) <span class="keyword">const</span>;
<a name="l01361"></a>01361 
<a name="l01366"></a><a class="code" href="classTelEngine_1_1Module.html#23130839815ab3925b8ddb7611ce0aa3">01366</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; type()<span class="keyword"> const</span>
<a name="l01367"></a>01367 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_type; }
<a name="l01368"></a>01368 
<a name="l01373"></a>01373     <span class="keywordtype">void</span> changed();
<a name="l01374"></a>01374 
<a name="l01379"></a><a class="code" href="classTelEngine_1_1Module.html#8d6c861f8cb5f6cea62b1241b3c07478">01379</a>     <span class="keyword">inline</span> <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> updateDelay()
<a name="l01380"></a>01380         { <span class="keywordflow">return</span> s_delay; }
<a name="l01381"></a>01381 
<a name="l01386"></a><a class="code" href="classTelEngine_1_1Module.html#f8db52628a006fe4959fdbe9b57a2ae1">01386</a>     <span class="keyword">inline</span> <span class="keyword">static</span> <span class="keywordtype">void</span> updateDelay(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> delay)
<a name="l01387"></a>01387         { s_delay = delay; }
<a name="l01388"></a>01388 
<a name="l01393"></a><a class="code" href="classTelEngine_1_1Module.html#10531be4caa13452785559309ddc9585">01393</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> filterInstalled()<span class="keyword"> const</span>
<a name="l01394"></a>01394 <span class="keyword">        </span>{ <span class="keywordflow">return</span> !m_filter.null(); }
<a name="l01395"></a>01395 
<a name="l01401"></a>01401     <span class="keywordtype">bool</span> filterDebug(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; item) <span class="keyword">const</span>;
<a name="l01402"></a>01402 
<a name="l01410"></a>01410     <span class="keyword">static</span> <span class="keywordtype">bool</span> itemComplete(<a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; itemList, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; item, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; partWord);
<a name="l01411"></a>01411 
<a name="l01412"></a>01412 <span class="keyword">protected</span>:
<a name="l01416"></a>01416     <span class="keyword">enum</span> {
<a name="l01417"></a>01417         <span class="comment">// Module messages</span>
<a name="l01418"></a>01418         Status     = 0x00000001,
<a name="l01419"></a>01419         Timer      = 0x00000002,
<a name="l01420"></a>01420         Level      = 0x00000004,
<a name="l01421"></a>01421         Command    = 0x00000008,
<a name="l01422"></a>01422         Help       = 0x00000010,
<a name="l01423"></a>01423         Halt       = 0x00000020,
<a name="l01424"></a>01424         Route      = 0x00000040,
<a name="l01425"></a>01425         Stop       = 0x00000080,
<a name="l01426"></a>01426         <span class="comment">// Driver messages</span>
<a name="l01427"></a>01427         Execute    = 0x00000100,
<a name="l01428"></a>01428         Drop       = 0x00000200,
<a name="l01429"></a>01429         <span class="comment">// Channel messages</span>
<a name="l01430"></a>01430         Locate     = 0x00000400,
<a name="l01431"></a>01431         Masquerade = 0x00000800,
<a name="l01432"></a>01432         Ringing    = 0x00001000,
<a name="l01433"></a>01433         Answered   = 0x00002000,
<a name="l01434"></a>01434         Tone       = 0x00004000,
<a name="l01435"></a>01435         Text       = 0x00008000,
<a name="l01436"></a>01436         Progress   = 0x00010000,
<a name="l01437"></a>01437         Update     = 0x00020000,
<a name="l01438"></a>01438         Transfer   = 0x00040000,
<a name="l01439"></a>01439         Control    = 0x00080000,
<a name="l01440"></a>01440         <span class="comment">// Instant messaging related</span>
<a name="l01441"></a>01441         MsgExecute = 0x00100000,
<a name="l01442"></a>01442         <span class="comment">// Last possible public ID</span>
<a name="l01443"></a>01443         PubLast    = 0x0fffffff,
<a name="l01444"></a>01444         <span class="comment">// Private messages base ID</span>
<a name="l01445"></a>01445         Private    = 0x10000000
<a name="l01446"></a>01446     } RelayID;
<a name="l01447"></a>01447 
<a name="l01453"></a>01453     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* messageName(<span class="keywordtype">int</span> <span class="keywordtype">id</span>);
<a name="l01454"></a>01454 
<a name="l01460"></a><a class="code" href="classTelEngine_1_1Module.html#9d33f87c84e182c5f18254040af0936e">01460</a>     <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> relayId(<span class="keyword">const</span> <span class="keywordtype">char</span>* name)
<a name="l01461"></a>01461         { <span class="keywordflow">return</span> <a class="code" href="namespaceTelEngine.html#4668c9172c6ae5f59f5782ecc6e05516">lookup</a>(name,s_messages); }
<a name="l01462"></a>01462 
<a name="l01469"></a>01469     Module(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keyword">const</span> <span class="keywordtype">char</span>* type = 0, <span class="keywordtype">bool</span> earlyInit = <span class="keyword">false</span>);
<a name="l01470"></a>01470 
<a name="l01474"></a>01474     <span class="keyword">virtual</span> ~Module();
<a name="l01475"></a>01475 
<a name="l01479"></a>01479     <span class="keyword">virtual</span> <span class="keywordtype">void</span> initialize();
<a name="l01480"></a>01480 
<a name="l01484"></a>01484     <span class="keywordtype">void</span> setup();
<a name="l01485"></a>01485 
<a name="l01491"></a><a class="code" href="classTelEngine_1_1Module.html#3327740a64a2bce513597e9c6ed245d7">01491</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> relayInstalled(<span class="keywordtype">int</span> <span class="keywordtype">id</span>)<span class="keyword"> const</span>
<a name="l01492"></a>01492 <span class="keyword">        </span>{ <span class="keywordflow">return</span> (<span class="keywordtype">id</span> &amp; m_relays) != 0; }
<a name="l01493"></a>01493 
<a name="l01500"></a>01500     <span class="keywordtype">bool</span> installRelay(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">unsigned</span> priority = 100);
<a name="l01501"></a>01501 
<a name="l01508"></a>01508     <span class="keywordtype">bool</span> installRelay(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">unsigned</span> priority = 100);
<a name="l01509"></a>01509 
<a name="l01517"></a>01517     <span class="keywordtype">bool</span> installRelay(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">unsigned</span> priority = 100);
<a name="l01518"></a>01518 
<a name="l01524"></a>01524     <span class="keywordtype">bool</span> installRelay(<a class="code" href="classTelEngine_1_1MessageRelay.html" title="A message handler relay.">MessageRelay</a>* relay);
<a name="l01525"></a>01525 
<a name="l01532"></a>01532     <span class="keywordtype">bool</span> uninstallRelay(<a class="code" href="classTelEngine_1_1MessageRelay.html" title="A message handler relay.">MessageRelay</a>* relay, <span class="keywordtype">bool</span> delRelay = <span class="keyword">true</span>);
<a name="l01533"></a>01533 
<a name="l01540"></a>01540     <span class="keywordtype">bool</span> uninstallRelay(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">bool</span> delRelay = <span class="keyword">true</span>);
<a name="l01541"></a>01541 
<a name="l01546"></a>01546     <span class="keywordtype">bool</span> uninstallRelays();
<a name="l01547"></a>01547 
<a name="l01554"></a>01554     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> received(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a> &amp;msg, <span class="keywordtype">int</span> <span class="keywordtype">id</span>);
<a name="l01555"></a>01555 
<a name="l01560"></a>01560     <span class="keyword">virtual</span> <span class="keywordtype">void</span> genUpdate(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01561"></a>01561 
<a name="l01566"></a>01566     <span class="keyword">virtual</span> <span class="keywordtype">void</span> msgTimer(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01567"></a>01567 
<a name="l01572"></a>01572     <span class="keyword">virtual</span> <span class="keywordtype">void</span> msgStatus(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01573"></a>01573 
<a name="l01579"></a>01579     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgRoute(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01580"></a>01580 
<a name="l01587"></a>01587     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgCommand(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01588"></a>01588 
<a name="l01593"></a>01593     <span class="keyword">virtual</span> <span class="keywordtype">void</span> statusModule(<a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; str);
<a name="l01594"></a>01594 
<a name="l01599"></a>01599     <span class="keyword">virtual</span> <span class="keywordtype">void</span> statusParams(<a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; str);
<a name="l01600"></a>01600 
<a name="l01605"></a>01605     <span class="keyword">virtual</span> <span class="keywordtype">void</span> statusDetail(<a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; str);
<a name="l01606"></a>01606 
<a name="l01613"></a>01613     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> commandExecute(<a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; retVal, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; line);
<a name="l01614"></a>01614 
<a name="l01622"></a>01622     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> commandComplete(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; partLine, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; partWord);
<a name="l01623"></a>01623 
<a name="l01629"></a>01629     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> setDebug(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; target);
<a name="l01630"></a>01630 
<a name="l01631"></a>01631 <span class="keyword">private</span>:
<a name="l01632"></a>01632     Module(); <span class="comment">// no default constructor please</span>
<a name="l01633"></a>01633     <span class="keyword">static</span> <a class="code" href="structTelEngine_1_1TokenDict.html">TokenDict</a> s_messages[];
<a name="l01634"></a>01634     <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a> m_relayList;
<a name="l01635"></a>01635 };
<a name="l01636"></a>01636 
<a name="l01641"></a><a class="code" href="classTelEngine_1_1Channel.html">01641</a> <span class="keyword">class </span>YATE_API Channel : <span class="keyword">public</span> CallEndpoint, <span class="keyword">public</span> <a class="code" href="classTelEngine_1_1DebugEnabler.html" title="A holder for a debug level.">DebugEnabler</a>, <span class="keyword">public</span> <a class="code" href="classTelEngine_1_1MessageNotifier.html" title="Post-dispatching message hook.">MessageNotifier</a>
<a name="l01642"></a>01642 {
<a name="l01643"></a>01643     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classTelEngine_1_1Driver.html" title="A Channel driver module.">Driver</a>;
<a name="l01644"></a>01644     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classTelEngine_1_1Router.html" title="Call routing thread.">Router</a>;
<a name="l01645"></a>01645     <a class="code" href="namespaceTelEngine.html#ca9689d1027503561ea6a86525ee2afa">YNOCOPY</a>(Channel); <span class="comment">// no automatic copies please</span>
<a name="l01646"></a>01646 <span class="keyword">private</span>:
<a name="l01647"></a>01647     <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a> m_parameters;
<a name="l01648"></a>01648     <a class="code" href="classTelEngine_1_1Driver.html" title="A Channel driver module.">Driver</a>* m_driver;
<a name="l01649"></a>01649     <span class="keywordtype">bool</span> m_outgoing;
<a name="l01650"></a>01650     u_int64_t m_timeout;
<a name="l01651"></a>01651     u_int64_t m_maxcall;
<a name="l01652"></a>01652     u_int64_t m_maxPDD;          <span class="comment">// Timeout while waiting for some progress on outgoing calls</span>
<a name="l01653"></a>01653     u_int64_t m_dtmfTime;
<a name="l01654"></a>01654     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m_toutAns;
<a name="l01655"></a>01655     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m_dtmfSeq;
<a name="l01656"></a>01656     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> m_dtmfText;
<a name="l01657"></a>01657     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> m_dtmfDetected;
<a name="l01658"></a>01658 
<a name="l01659"></a>01659 <span class="keyword">protected</span>:
<a name="l01660"></a>01660     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> m_status;
<a name="l01661"></a>01661     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> m_address;
<a name="l01662"></a>01662     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> m_targetid;
<a name="l01663"></a>01663     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> m_billid;
<a name="l01664"></a>01664     <span class="keywordtype">bool</span> m_answered;
<a name="l01665"></a>01665 
<a name="l01666"></a>01666 <span class="keyword">public</span>:
<a name="l01670"></a>01670     <span class="keyword">virtual</span> ~Channel();
<a name="l01671"></a>01671 
<a name="l01677"></a>01677     <span class="keyword">virtual</span> <span class="keywordtype">void</span>* getObject(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; name) <span class="keyword">const</span>;
<a name="l01678"></a>01678 
<a name="l01683"></a>01683     <span class="keyword">static</span> <a class="code" href="classTelEngine_1_1Mutex.html" title="Mutex support.">Mutex</a>&amp; paramMutex();
<a name="l01684"></a>01684 
<a name="l01690"></a>01690     <span class="keyword">virtual</span> <span class="keywordtype">void</span> complete(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keywordtype">bool</span> minimal = <span class="keyword">false</span>) <span class="keyword">const</span>;
<a name="l01691"></a>01691 
<a name="l01699"></a>01699     <a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>* message(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">bool</span> minimal = <span class="keyword">false</span>, <span class="keywordtype">bool</span> data = <span class="keyword">false</span>);
<a name="l01700"></a>01700 
<a name="l01711"></a>01711     <a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>* message(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>* original, <span class="keyword">const</span> <span class="keywordtype">char</span>* params = 0, <span class="keywordtype">bool</span> minimal = <span class="keyword">false</span>, <span class="keywordtype">bool</span> data = <span class="keyword">false</span>);
<a name="l01712"></a>01712 
<a name="l01723"></a><a class="code" href="classTelEngine_1_1Channel.html#9aa44e44e13aeaed287d36832bb0146a">01723</a>     <span class="keyword">inline</span> <a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>* message(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; original, <span class="keyword">const</span> <span class="keywordtype">char</span>* params = 0, <span class="keywordtype">bool</span> minimal = <span class="keyword">false</span>, <span class="keywordtype">bool</span> data = <span class="keyword">false</span>)
<a name="l01724"></a>01724         { <span class="keywordflow">return</span> message(name,&amp;original,params,minimal,data); }
<a name="l01725"></a>01725 
<a name="l01731"></a>01731     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgProgress(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01732"></a>01732 
<a name="l01738"></a>01738     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgRinging(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01739"></a>01739 
<a name="l01745"></a>01745     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgAnswered(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01746"></a>01746 
<a name="l01753"></a>01753     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgTone(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keyword">const</span> <span class="keywordtype">char</span>* tone);
<a name="l01754"></a>01754 
<a name="l01761"></a>01761     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgText(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keyword">const</span> <span class="keywordtype">char</span>* text);
<a name="l01762"></a>01762 
<a name="l01769"></a>01769     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgDrop(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keyword">const</span> <span class="keywordtype">char</span>* reason);
<a name="l01770"></a>01770 
<a name="l01776"></a>01776     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgTransfer(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01777"></a>01777 
<a name="l01783"></a>01783     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgUpdate(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01784"></a>01784 
<a name="l01790"></a>01790     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgMasquerade(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01791"></a>01791 
<a name="l01796"></a>01796     <span class="keyword">virtual</span> <span class="keywordtype">void</span> msgStatus(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01797"></a>01797 
<a name="l01803"></a>01803     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgControl(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01804"></a>01804 
<a name="l01810"></a>01810     <span class="keyword">virtual</span> <span class="keywordtype">void</span> checkTimers(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1Time.html" title="A time holding class.">Time</a>&amp; tmr);
<a name="l01811"></a>01811 
<a name="l01818"></a>01818     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> callPrerouted(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keywordtype">bool</span> handled);
<a name="l01819"></a>01819 
<a name="l01825"></a>01825     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> callRouted(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01826"></a>01826 
<a name="l01831"></a>01831     <span class="keyword">virtual</span> <span class="keywordtype">void</span> callAccept(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01832"></a>01832 
<a name="l01839"></a>01839     <span class="keyword">virtual</span> <span class="keywordtype">void</span> callRejected(<span class="keyword">const</span> <span class="keywordtype">char</span>* error, <span class="keyword">const</span> <span class="keywordtype">char</span>* reason = 0, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>* msg = 0);
<a name="l01840"></a>01840 
<a name="l01846"></a>01846     <span class="keyword">virtual</span> <span class="keywordtype">void</span> callConnect(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01847"></a>01847 
<a name="l01852"></a>01852     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> setDebug(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01853"></a>01853 
<a name="l01858"></a><a class="code" href="classTelEngine_1_1Channel.html#ddb487a8615fb39a1b739e527a3d8c70">01858</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; status()<span class="keyword"> const</span>
<a name="l01859"></a>01859 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_status; }
<a name="l01860"></a>01860 
<a name="l01865"></a><a class="code" href="classTelEngine_1_1Channel.html#e60ccaf7ed68d705de03a0732040fa8f">01865</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; address()<span class="keyword"> const</span>
<a name="l01866"></a>01866 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_address; }
<a name="l01867"></a>01867 
<a name="l01872"></a><a class="code" href="classTelEngine_1_1Channel.html#9fa231cd288ea4a0b72e559eb8f8c06f">01872</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> isOutgoing()<span class="keyword"> const</span>
<a name="l01873"></a>01873 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_outgoing; }
<a name="l01874"></a>01874 
<a name="l01879"></a><a class="code" href="classTelEngine_1_1Channel.html#9ad1ff4694365bf3886a96ccfbe5dc67">01879</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> isIncoming()<span class="keyword"> const</span>
<a name="l01880"></a>01880 <span class="keyword">        </span>{ <span class="keywordflow">return</span> !m_outgoing; }
<a name="l01881"></a>01881 
<a name="l01886"></a><a class="code" href="classTelEngine_1_1Channel.html#a0a103f3a799529da5fe1542a673bda5">01886</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> isAnswered()<span class="keyword"> const</span>
<a name="l01887"></a>01887 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_answered; }
<a name="l01888"></a>01888 
<a name="l01893"></a>01893     <span class="keyword">const</span> <span class="keywordtype">char</span>* direction() <span class="keyword">const</span>;
<a name="l01894"></a>01894 
<a name="l01899"></a><a class="code" href="classTelEngine_1_1Channel.html#00f9056eb6e423ebb2dda9dfc582ca1c">01899</a>     <span class="keyword">inline</span> <a class="code" href="classTelEngine_1_1Driver.html" title="A Channel driver module.">Driver</a>* driver()<span class="keyword"> const</span>
<a name="l01900"></a>01900 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_driver; }
<a name="l01901"></a>01901 
<a name="l01906"></a><a class="code" href="classTelEngine_1_1Channel.html#2ebb909169fe603b5d17ec9ee7ebc09d">01906</a>     <span class="keyword">inline</span> u_int64_t timeout()<span class="keyword"> const</span>
<a name="l01907"></a>01907 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_timeout; }
<a name="l01908"></a>01908 
<a name="l01913"></a><a class="code" href="classTelEngine_1_1Channel.html#2d3c5861b45c960a3097aaaf8093c7f5">01913</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> timeout(u_int64_t tout)
<a name="l01914"></a>01914         { m_timeout = tout; }
<a name="l01915"></a>01915 
<a name="l01920"></a><a class="code" href="classTelEngine_1_1Channel.html#736c6d586d6433e0494d7348becd8ed7">01920</a>     <span class="keyword">inline</span> u_int64_t maxcall()<span class="keyword"> const</span>
<a name="l01921"></a>01921 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_maxcall; }
<a name="l01922"></a>01922 
<a name="l01927"></a><a class="code" href="classTelEngine_1_1Channel.html#9fcfaecfd4c73453cec3d45b3066d039">01927</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> maxcall(u_int64_t tout)
<a name="l01928"></a>01928         { m_maxcall = tout; }
<a name="l01929"></a>01929 
<a name="l01935"></a><a class="code" href="classTelEngine_1_1Channel.html#33dd2e12a37920ec5c311a38e81c1c86">01935</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setMaxcall(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keywordtype">int</span> defTout = -1)
<a name="l01936"></a>01936         { setMaxcall(&amp;msg,defTout); }
<a name="l01937"></a>01937 
<a name="l01943"></a>01943     <span class="keywordtype">void</span> setMaxcall(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>* msg, <span class="keywordtype">int</span> defTout = -1);
<a name="l01944"></a>01944 
<a name="l01950"></a><a class="code" href="classTelEngine_1_1Channel.html#cdf5b3c98a53de38d482ba550d527509">01950</a>     <span class="keyword">inline</span> u_int64_t maxPDD()<span class="keyword"> const</span>
<a name="l01951"></a>01951 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_maxPDD; }
<a name="l01952"></a>01952 
<a name="l01958"></a><a class="code" href="classTelEngine_1_1Channel.html#595ac19dec068424e11122dc059d8ed7">01958</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> maxPDD(u_int64_t tout)
<a name="l01959"></a>01959         { m_maxPDD = tout; }
<a name="l01960"></a>01960 
<a name="l01966"></a>01966     <span class="keywordtype">void</span> setMaxPDD(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l01967"></a>01967 
<a name="l01973"></a><a class="code" href="classTelEngine_1_1Channel.html#61758a37bec5ef58df69c2bd25278f5c">01973</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; targetid()<span class="keyword"> const</span>
<a name="l01974"></a>01974 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_targetid; }
<a name="l01975"></a>01975 
<a name="l01981"></a><a class="code" href="classTelEngine_1_1Channel.html#639ba8a3b7c22ef8558c900181df0e7e">01981</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; billid()<span class="keyword"> const</span>
<a name="l01982"></a>01982 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_billid; }
<a name="l01983"></a>01983 
<a name="l01988"></a>01988     <span class="keywordtype">void</span> initChan();
<a name="l01989"></a>01989 
<a name="l01996"></a>01996     <span class="keywordtype">bool</span> startRouter(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>* msg);
<a name="l01997"></a>01997 
<a name="l02002"></a>02002     <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> allocId();
<a name="l02003"></a>02003 
<a name="l02008"></a>02008     <span class="keywordtype">void</span> filterDebug(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; item);
<a name="l02009"></a>02009 
<a name="l02014"></a><a class="code" href="classTelEngine_1_1Channel.html#e9fcd166a749bd2d723fbd9a51472a42">02014</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; parameters()<span class="keyword"> const</span>
<a name="l02015"></a>02015 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_parameters; }
<a name="l02016"></a>02016 
<a name="l02022"></a>02022     <span class="keyword">virtual</span> <span class="keywordtype">void</span> dispatched(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keywordtype">bool</span> handled);
<a name="l02023"></a>02023 
<a name="l02024"></a>02024 <span class="keyword">protected</span>:
<a name="l02028"></a>02028     Channel(<a class="code" href="classTelEngine_1_1Driver.html" title="A Channel driver module.">Driver</a>* driver, <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keywordtype">id</span> = 0, <span class="keywordtype">bool</span> outgoing = <span class="keyword">false</span>);
<a name="l02029"></a>02029 
<a name="l02033"></a>02033     Channel(<a class="code" href="classTelEngine_1_1Driver.html" title="A Channel driver module.">Driver</a>&amp; driver, <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keywordtype">id</span> = 0, <span class="keywordtype">bool</span> outgoing = <span class="keyword">false</span>);
<a name="l02034"></a>02034 
<a name="l02039"></a>02039     <span class="keywordtype">void</span> cleanup();
<a name="l02040"></a>02040 
<a name="l02044"></a>02044     <span class="keywordtype">void</span> dropChan();
<a name="l02045"></a>02045 
<a name="l02050"></a>02050     <span class="keyword">virtual</span> <span class="keywordtype">void</span> zeroRefs();
<a name="l02051"></a>02051 
<a name="l02056"></a>02056     <span class="keyword">virtual</span> <span class="keywordtype">void</span> connected(<span class="keyword">const</span> <span class="keywordtype">char</span>* reason);
<a name="l02057"></a>02057 
<a name="l02063"></a>02063     <span class="keyword">virtual</span> <span class="keywordtype">void</span> disconnected(<span class="keywordtype">bool</span> <span class="keyword">final</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* reason);
<a name="l02064"></a>02064 
<a name="l02069"></a>02069     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setDisconnect(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>* params);
<a name="l02070"></a>02070 
<a name="l02076"></a>02076     <span class="keyword">virtual</span> <span class="keywordtype">void</span> endDisconnect(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keywordtype">bool</span> handled);
<a name="l02077"></a>02077 
<a name="l02082"></a>02082     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setId(<span class="keyword">const</span> <span class="keywordtype">char</span>* newId);
<a name="l02083"></a>02083 
<a name="l02089"></a>02089     <span class="keyword">virtual</span> <a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>* getDisconnect(<span class="keyword">const</span> <span class="keywordtype">char</span>* reason);
<a name="l02090"></a>02090 
<a name="l02096"></a>02096     <span class="keywordtype">void</span> status(<span class="keyword">const</span> <span class="keywordtype">char</span>* newstat);
<a name="l02097"></a>02097 
<a name="l02102"></a>02102     <span class="keyword">virtual</span> <span class="keywordtype">void</span> statusParams(<a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; str);
<a name="l02103"></a>02103 
<a name="l02108"></a><a class="code" href="classTelEngine_1_1Channel.html#506f7e465513a50f88237f6ccc03699b">02108</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> setOutgoing(<span class="keywordtype">bool</span> outgoing = <span class="keyword">true</span>)
<a name="l02109"></a>02109         { m_outgoing = outgoing; }
<a name="l02110"></a>02110 
<a name="l02116"></a>02116     <span class="keywordtype">bool</span> dtmfSequence(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l02117"></a>02117 
<a name="l02123"></a>02123     <span class="keywordtype">bool</span> dtmfEnqueue(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>* msg);
<a name="l02124"></a>02124 
<a name="l02131"></a>02131     <span class="keywordtype">bool</span> dtmfInband(<span class="keyword">const</span> <span class="keywordtype">char</span>* tone);
<a name="l02132"></a>02132 
<a name="l02139"></a>02139     <span class="keywordtype">bool</span> toneDetect(<span class="keyword">const</span> <span class="keywordtype">char</span>* sniffer = 0);
<a name="l02140"></a>02140 
<a name="l02145"></a><a class="code" href="classTelEngine_1_1Channel.html#11f8294a41a4b4ca60e28eef82e6b583">02145</a>     <span class="keyword">inline</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; parameters()
<a name="l02146"></a>02146         { <span class="keywordflow">return</span> m_parameters; }
<a name="l02147"></a>02147 
<a name="l02148"></a>02148 <span class="keyword">private</span>:
<a name="l02149"></a>02149     <span class="keywordtype">void</span> init();
<a name="l02150"></a>02150     Channel(); <span class="comment">// no default constructor please</span>
<a name="l02151"></a>02151 };
<a name="l02152"></a>02152 
<a name="l02157"></a><a class="code" href="classTelEngine_1_1Driver.html">02157</a> <span class="keyword">class </span>YATE_API Driver : <span class="keyword">public</span> Module
<a name="l02158"></a>02158 {
<a name="l02159"></a>02159     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classTelEngine_1_1Router.html" title="Call routing thread.">Router</a>;
<a name="l02160"></a>02160     <span class="keyword">friend</span> <span class="keyword">class </span>Channel;
<a name="l02161"></a>02161 
<a name="l02162"></a>02162 <span class="keyword">private</span>:
<a name="l02163"></a>02163     <span class="keywordtype">bool</span> m_init;
<a name="l02164"></a>02164     <span class="keywordtype">bool</span> m_varchan;
<a name="l02165"></a>02165     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> m_prefix;
<a name="l02166"></a>02166     <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a> m_chans;
<a name="l02167"></a>02167     <span class="keywordtype">int</span> m_routing;
<a name="l02168"></a>02168     <span class="keywordtype">int</span> m_routed;
<a name="l02169"></a>02169     <span class="keywordtype">int</span> m_total;
<a name="l02170"></a>02170     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m_nextid;
<a name="l02171"></a>02171     <span class="keywordtype">int</span> m_timeout;
<a name="l02172"></a>02172     <span class="keywordtype">int</span> m_maxroute;
<a name="l02173"></a>02173     <span class="keywordtype">int</span> m_maxchans;
<a name="l02174"></a>02174     <span class="keywordtype">int</span> m_chanCount;
<a name="l02175"></a>02175     <span class="keywordtype">bool</span> m_dtmfDups;
<a name="l02176"></a>02176 
<a name="l02177"></a>02177 <span class="keyword">public</span>:
<a name="l02183"></a>02183     <span class="keyword">virtual</span> <span class="keywordtype">void</span>* getObject(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; name) <span class="keyword">const</span>;
<a name="l02184"></a>02184 
<a name="l02189"></a><a class="code" href="classTelEngine_1_1Driver.html#fcbdb9185579fa4b8d30eb76c358ba6c">02189</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; prefix()<span class="keyword"> const</span>
<a name="l02190"></a>02190 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_prefix; }
<a name="l02191"></a>02191 
<a name="l02196"></a><a class="code" href="classTelEngine_1_1Driver.html#5e1440b99bf5f5ec0acc5f7f592244f1">02196</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> varchan()<span class="keyword"> const</span>
<a name="l02197"></a>02197 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_varchan; }
<a name="l02198"></a>02198 
<a name="l02203"></a><a class="code" href="classTelEngine_1_1Driver.html#dc2a11b4f8a42e08e46c92e790443578">02203</a>     <span class="keyword">inline</span> <a class="code" href="classTelEngine_1_1ObjList.html" title="An object list class.">ObjList</a>&amp; channels()
<a name="l02204"></a>02204         { <span class="keywordflow">return</span> m_chans; }
<a name="l02205"></a>02205 
<a name="l02211"></a>02211     <span class="keyword">virtual</span> Channel* find(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; <span class="keywordtype">id</span>) <span class="keyword">const</span>;
<a name="l02212"></a>02212 
<a name="l02217"></a>02217     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> isBusy() <span class="keyword">const</span>;
<a name="l02218"></a>02218 
<a name="l02223"></a>02223     <span class="keyword">virtual</span> <span class="keywordtype">void</span> dropAll(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a> &amp;msg);
<a name="l02224"></a>02224 
<a name="l02230"></a>02230     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> canAccept(<span class="keywordtype">bool</span> routers = <span class="keyword">true</span>);
<a name="l02231"></a>02231 
<a name="l02236"></a>02236     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> canRoute();
<a name="l02237"></a>02237 
<a name="l02242"></a>02242     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nextid();
<a name="l02243"></a>02243 
<a name="l02248"></a><a class="code" href="classTelEngine_1_1Driver.html#73ee19042893845cdba936c1b81bc458">02248</a>     <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lastid()<span class="keyword"> const</span>
<a name="l02249"></a>02249 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_nextid; }
<a name="l02250"></a>02250 
<a name="l02255"></a><a class="code" href="classTelEngine_1_1Driver.html#57a784c9daedb4cb7adba7d6e5cb02cd">02255</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> timeout()<span class="keyword"> const</span>
<a name="l02256"></a>02256 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_timeout; }
<a name="l02257"></a>02257 
<a name="l02262"></a><a class="code" href="classTelEngine_1_1Driver.html#87c62d57f45169015334fc529e5a47a2">02262</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> routing()<span class="keyword"> const</span>
<a name="l02263"></a>02263 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_routing; }
<a name="l02264"></a>02264 
<a name="l02269"></a><a class="code" href="classTelEngine_1_1Driver.html#9275bdd11a0fcf16a55b26580ecb1827">02269</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> routed()<span class="keyword"> const</span>
<a name="l02270"></a>02270 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_routed; }
<a name="l02271"></a>02271 
<a name="l02276"></a><a class="code" href="classTelEngine_1_1Driver.html#f8cbb2c239529ebf0dcad79d04756a41">02276</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> total()<span class="keyword"> const</span>
<a name="l02277"></a>02277 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_total; }
<a name="l02278"></a>02278 
<a name="l02283"></a><a class="code" href="classTelEngine_1_1Driver.html#18ef8e4187486dbc44e1511288fd6369">02283</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> chanCount()<span class="keyword"> const</span>
<a name="l02284"></a>02284 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_chanCount; }
<a name="l02285"></a>02285 
<a name="l02290"></a><a class="code" href="classTelEngine_1_1Driver.html#84f1db7eb6e493b4165ce24acf6f1236">02290</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> maxChans()<span class="keyword"> const</span>
<a name="l02291"></a>02291 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_maxchans; }
<a name="l02292"></a>02292 
<a name="l02293"></a>02293 <span class="keyword">protected</span>:
<a name="l02299"></a>02299     Driver(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keyword">const</span> <span class="keywordtype">char</span>* type = 0);
<a name="l02300"></a>02300 
<a name="l02304"></a>02304     <span class="keyword">virtual</span> <span class="keywordtype">void</span> initialize();
<a name="l02305"></a>02305 
<a name="l02311"></a>02311     <span class="keywordtype">void</span> setup(<span class="keyword">const</span> <span class="keywordtype">char</span>* prefix = 0, <span class="keywordtype">bool</span> minimal = <span class="keyword">false</span>);
<a name="l02312"></a>02312 
<a name="l02319"></a>02319     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> received(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a> &amp;msg, <span class="keywordtype">int</span> <span class="keywordtype">id</span>);
<a name="l02320"></a>02320 
<a name="l02325"></a>02325     <span class="keyword">virtual</span> <span class="keywordtype">void</span> genUpdate(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l02326"></a>02326 
<a name="l02333"></a>02333     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> hasLine(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; line) <span class="keyword">const</span>;
<a name="l02334"></a>02334 
<a name="l02341"></a>02341     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgRoute(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg);
<a name="l02342"></a>02342 
<a name="l02349"></a>02349     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> msgExecute(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; dest) = 0;
<a name="l02350"></a>02350 
<a name="l02358"></a>02358     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> commandComplete(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; partLine, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; partWord);
<a name="l02359"></a>02359 
<a name="l02364"></a>02364     <span class="keyword">virtual</span> <span class="keywordtype">void</span> statusModule(<a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; str);
<a name="l02365"></a>02365 
<a name="l02370"></a>02370     <span class="keyword">virtual</span> <span class="keywordtype">void</span> statusParams(<a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; str);
<a name="l02371"></a>02371 
<a name="l02376"></a>02376     <span class="keyword">virtual</span> <span class="keywordtype">void</span> statusDetail(<a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; str);
<a name="l02377"></a>02377 
<a name="l02383"></a>02383     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> setDebug(<a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>&amp; msg, <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; target);
<a name="l02384"></a>02384 
<a name="l02388"></a>02388     <span class="keyword">virtual</span> <span class="keywordtype">void</span> loadLimits();
<a name="l02389"></a>02389 
<a name="l02394"></a><a class="code" href="classTelEngine_1_1Driver.html#a639363d0dcf31cef945b1b91b16a7d1">02394</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> varchan(<span class="keywordtype">bool</span> variable)
<a name="l02395"></a>02395         { m_varchan = variable; }
<a name="l02396"></a>02396 
<a name="l02401"></a><a class="code" href="classTelEngine_1_1Driver.html#0b460706e6305f6fdc2af8097210917a">02401</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> timeout(<span class="keywordtype">int</span> tout)
<a name="l02402"></a>02402         { m_timeout = tout; }
<a name="l02403"></a>02403 
<a name="l02408"></a><a class="code" href="classTelEngine_1_1Driver.html#6db0325f9b32e30c33c8c5d9c48c5027">02408</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> maxRoute(<span class="keywordtype">int</span> ncalls)
<a name="l02409"></a>02409         { m_maxroute = ncalls; }
<a name="l02410"></a>02410 
<a name="l02415"></a><a class="code" href="classTelEngine_1_1Driver.html#dd8852fb2cd53967c0319ea605873a55">02415</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> maxChans(<span class="keywordtype">int</span> ncalls)
<a name="l02416"></a>02416         { m_maxchans = ncalls; }
<a name="l02417"></a>02417 
<a name="l02422"></a><a class="code" href="classTelEngine_1_1Driver.html#a9964968adc5a5e8d7e052862e1712b9">02422</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> dtmfDups(<span class="keywordtype">bool</span> duplicates)
<a name="l02423"></a>02423         { m_dtmfDups = duplicates; }
<a name="l02424"></a>02424 
<a name="l02425"></a>02425 <span class="keyword">private</span>:
<a name="l02426"></a>02426     Driver(); <span class="comment">// no default constructor please</span>
<a name="l02427"></a>02427 };
<a name="l02428"></a>02428 
<a name="l02433"></a><a class="code" href="classTelEngine_1_1Router.html">02433</a> <span class="keyword">class </span>YATE_API Router : <span class="keyword">public</span> <a class="code" href="classTelEngine_1_1Thread.html" title="Thread support class.">Thread</a>
<a name="l02434"></a>02434 {
<a name="l02435"></a>02435     <a class="code" href="namespaceTelEngine.html#ca9689d1027503561ea6a86525ee2afa">YNOCOPY</a>(Router); <span class="comment">// no automatic copies please</span>
<a name="l02436"></a>02436 <span class="keyword">private</span>:
<a name="l02437"></a>02437     Driver* m_driver;
<a name="l02438"></a>02438     <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a> m_id;
<a name="l02439"></a>02439     <a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>* m_msg;
<a name="l02440"></a>02440 
<a name="l02441"></a>02441 <span class="keyword">public</span>:
<a name="l02448"></a>02448     Router(Driver* driver, <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keywordtype">id</span>, <a class="code" href="classTelEngine_1_1Message.html" title="A message container class.">Message</a>* msg);
<a name="l02449"></a>02449 
<a name="l02453"></a>02453     <span class="keyword">virtual</span> <span class="keywordtype">void</span> run();
<a name="l02454"></a>02454 
<a name="l02459"></a>02459     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> route();
<a name="l02460"></a>02460 
<a name="l02464"></a>02464     <span class="keyword">virtual</span> <span class="keywordtype">void</span> cleanup();
<a name="l02465"></a>02465 
<a name="l02466"></a>02466 <span class="keyword">protected</span>:
<a name="l02471"></a><a class="code" href="classTelEngine_1_1Router.html#1d1c1158d32fbcfdb93e70964c681b68">02471</a>     <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1String.html" title="A C-style string handling class.">String</a>&amp; id()<span class="keyword"> const</span>
<a name="l02472"></a>02472 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_id; }
<a name="l02473"></a>02473 };
<a name="l02474"></a>02474 
<a name="l02479"></a><a class="code" href="classTelEngine_1_1CallAccount.html">02479</a> <span class="keyword">class </span>YATE_API CallAccount
<a name="l02480"></a>02480 {
<a name="l02481"></a>02481     <a class="code" href="namespaceTelEngine.html#ca9689d1027503561ea6a86525ee2afa">YNOCOPY</a>(CallAccount);
<a name="l02482"></a>02482 <span class="keyword">private</span>:
<a name="l02483"></a>02483     <a class="code" href="classTelEngine_1_1Mutex.html" title="Mutex support.">Mutex</a>* m_mutex;
<a name="l02484"></a>02484     <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a> m_inbParams;
<a name="l02485"></a>02485     <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a> m_outParams;
<a name="l02486"></a>02486     <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a> m_regParams;
<a name="l02487"></a>02487 
<a name="l02488"></a>02488 <span class="keyword">public</span>:
<a name="l02493"></a>02493     <span class="keywordtype">void</span> pickAccountParams(<span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; params);
<a name="l02494"></a>02494 
<a name="l02495"></a>02495 
<a name="l02500"></a>02500     <span class="keywordtype">void</span> setInboundParams(<a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; params);
<a name="l02501"></a>02501 
<a name="l02506"></a>02506     <span class="keywordtype">void</span> setOutboundParams(<a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; params);
<a name="l02507"></a>02507 
<a name="l02512"></a>02512     <span class="keywordtype">void</span> setRegisterParams(<a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; params);
<a name="l02513"></a>02513 
<a name="l02518"></a><a class="code" href="classTelEngine_1_1CallAccount.html#9c265d877801a5130d63c7acfa153377">02518</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; inboundParams()<span class="keyword"> const</span>
<a name="l02519"></a>02519 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_inbParams; }
<a name="l02520"></a>02520 
<a name="l02525"></a><a class="code" href="classTelEngine_1_1CallAccount.html#f93072b0d0eed11f8a9f6feb16043f01">02525</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; outboundParams()<span class="keyword"> const</span>
<a name="l02526"></a>02526 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_outParams; }
<a name="l02527"></a>02527 
<a name="l02532"></a><a class="code" href="classTelEngine_1_1CallAccount.html#a1fcba1741e5a312a441e39e2fa4dcdd">02532</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTelEngine_1_1NamedList.html" title="A named string container class.">NamedList</a>&amp; registerParams()<span class="keyword"> const</span>
<a name="l02533"></a>02533 <span class="keyword">        </span>{ <span class="keywordflow">return</span> m_regParams; }
<a name="l02534"></a>02534 
<a name="l02535"></a>02535 <span class="keyword">protected</span>:
<a name="l02540"></a><a class="code" href="classTelEngine_1_1CallAccount.html#78bc5920c579f6d8addb5635e37c1617">02540</a>     <span class="keyword">inline</span> CallAccount(<a class="code" href="classTelEngine_1_1Mutex.html" title="Mutex support.">Mutex</a>* mutex)
<a name="l02541"></a>02541         : m_mutex(mutex), m_inbParams(<span class="stringliteral">""</span>), m_outParams(<span class="stringliteral">""</span>), m_regParams(<span class="stringliteral">""</span>)
<a name="l02542"></a>02542         { }
<a name="l02543"></a>02543 };
<a name="l02544"></a>02544 
<a name="l02550"></a>02550 YATE_API <span class="keywordtype">bool</span> <a class="code" href="namespaceTelEngine.html#122864fbec13ae04fd9809b7359e04f1">isE164</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* str);
<a name="l02551"></a>02551 
<a name="l02552"></a>02552 }; <span class="comment">// namespace TelEngine</span>
<a name="l02553"></a>02553 
<a name="l02554"></a>02554 <span class="preprocessor">#endif </span><span class="comment">/* __YATEPHONE_H */</span>
<a name="l02555"></a>02555 
<a name="l02556"></a>02556 <span class="comment">/* vi: set ts=8 sw=4 sts=4 noet: */</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Tue Mar 1 15:45:05 2016 for Yate by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.2 </small></address>
</body>
</html>
